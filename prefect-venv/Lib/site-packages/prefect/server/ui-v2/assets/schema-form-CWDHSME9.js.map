{"version":3,"file":"schema-form-CWDHSME9.js","sources":["../../node_modules/lucide-react/dist/esm/icons/eye-off.js","../../node_modules/lucide-react/dist/esm/icons/eye.js","../../node_modules/lucide-react/dist/esm/icons/grip-vertical.js","../../src/components/schemas/utilities/guards.ts","../../src/components/schemas/utilities/mergeSchemaPropertyDefinition.ts","../../src/components/schemas/schema-form-input-all-of.tsx","../../src/components/schemas/utilities/getIndexForAnyOfPropertyValue.ts","../../src/components/schemas/utilities/getSchemaObjectLabel.ts","../../src/components/schemas/schema-form-input-any-of.tsx","../../node_modules/uuid/dist/stringify.js","../../node_modules/uuid/dist/rng.js","../../node_modules/uuid/dist/native.js","../../node_modules/uuid/dist/v4.js","../../src/components/schemas/types/errors.ts","../../src/components/schemas/schema-form-property-errors.tsx","../../src/components/schemas/types/prefect-kind-value.ts","../../src/components/schemas/utilities/convertValueToPrefectKind.ts","../../src/components/schemas/schema-form-property-menu.tsx","../../src/components/schemas/schema-form-input-array-item.tsx","../../src/components/schemas/schema-form-input-array-list.tsx","../../src/components/schemas/schema-form-input-enum.tsx","../../src/components/schemas/types/schemas.ts","../../src/components/schemas/utilities/asType.ts","../../src/components/schemas/schema-form-input-array.tsx","../../src/components/blocks/block-document-combobox/block-document-combobox.tsx","../../src/components/schemas/schema-form-input-block-document.tsx","../../src/components/schemas/schema-form-input-boolean.tsx","../../src/components/schemas/schema-form-input-integer.tsx","../../src/components/schemas/schema-form-input-null.tsx","../../src/components/schemas/schema-form-input-number.tsx","../../src/components/schemas/schema-form-input-prefect-kind-jinja.tsx","../../src/components/schemas/schema-form-input-prefect-kind-json.tsx","../../src/components/variables/variable-combobox/variable-combobox.tsx","../../src/components/schemas/schema-form-input-prefect-kind-workspace-variable.tsx","../../src/components/schemas/schema-form-input-string-format-date.tsx","../../src/components/schemas/schema-form-input-string-format-json.tsx","../../src/components/schemas/schema-form-input-string-format-password.tsx","../../src/components/schemas/schema-form-input-string-format-time-delta.tsx","../../src/components/schemas/schema-form-input-string.tsx","../../src/components/schemas/schema-form-input-unknown.tsx","../../src/components/schemas/schema-form-input.tsx","../../src/components/schemas/schema-form-property-description.tsx","../../src/components/schemas/schema-form-property-label.tsx","../../src/components/schemas/schema-form-property.tsx","../../src/components/schemas/utilities/sortByPropertyPosition.ts","../../src/components/schemas/schema-form-input-object.tsx","../../src/components/schemas/schema-form-provider.tsx","../../src/components/schemas/schema-form.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49\",\n      key: \"ct8e1f\"\n    }\n  ],\n  [\"path\", { d: \"M14.084 14.158a3 3 0 0 1-4.242-4.242\", key: \"151rxh\" }],\n  [\n    \"path\",\n    {\n      d: \"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143\",\n      key: \"13bj9a\"\n    }\n  ],\n  [\"path\", { d: \"m2 2 20 20\", key: \"1ooewy\" }]\n];\nconst EyeOff = createLucideIcon(\"eye-off\", __iconNode);\n\nexport { __iconNode, EyeOff as default };\n//# sourceMappingURL=eye-off.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0\",\n      key: \"1nclc0\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n];\nconst Eye = createLucideIcon(\"eye\", __iconNode);\n\nexport { __iconNode, Eye as default };\n//# sourceMappingURL=eye.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"9\", cy: \"12\", r: \"1\", key: \"1vctgf\" }],\n  [\"circle\", { cx: \"9\", cy: \"5\", r: \"1\", key: \"hp0tcf\" }],\n  [\"circle\", { cx: \"9\", cy: \"19\", r: \"1\", key: \"fkjjf6\" }],\n  [\"circle\", { cx: \"15\", cy: \"12\", r: \"1\", key: \"1tmaij\" }],\n  [\"circle\", { cx: \"15\", cy: \"5\", r: \"1\", key: \"19l28e\" }],\n  [\"circle\", { cx: \"15\", cy: \"19\", r: \"1\", key: \"f4zoj3\" }]\n];\nconst GripVertical = createLucideIcon(\"grip-vertical\", __iconNode);\n\nexport { __iconNode, GripVertical as default };\n//# sourceMappingURL=grip-vertical.js.map\n","import { isDate } from \"date-fns\";\nimport type { ReferenceObject, SchemaObject } from \"openapi-typescript\";\n\nexport function isString(value: unknown): value is string {\n\treturn typeof value === \"string\";\n}\n\nexport function isDefined<T>(value: T | undefined): value is T {\n\treturn value !== undefined;\n}\n\nexport function isRecord(item: unknown): item is Record<PropertyKey, unknown> {\n\treturn (\n\t\titem !== null &&\n\t\ttypeof item === \"object\" &&\n\t\t!Array.isArray(item) &&\n\t\t!isDate(item)\n\t);\n}\n\nexport function isArray(item: unknown): item is unknown[] {\n\treturn Array.isArray(item);\n}\n\nexport function isEmptyObject(value: unknown): value is Record<string, never> {\n\treturn (\n\t\ttypeof value === \"object\" &&\n\t\t!Array.isArray(value) &&\n\t\tvalue !== null &&\n\t\tObject.keys(value).length === 0\n\t);\n}\n\nexport function isReferenceObject(\n\tproperty: SchemaObject | ReferenceObject,\n): property is ReferenceObject {\n\treturn \"$ref\" in property;\n}\n\nexport function isAnyOfObject(\n\tproperty: SchemaObject,\n): property is SchemaObject & { anyOf: (SchemaObject | ReferenceObject)[] } {\n\treturn \"anyOf\" in property && isDefined(property.anyOf);\n}\n\nexport function isOneOfObject(\n\tproperty: SchemaObject,\n): property is SchemaObject & { oneOf: (SchemaObject | ReferenceObject)[] } {\n\treturn \"oneOf\" in property && isDefined(property.oneOf);\n}\n\nexport function isAllOfObject(\n\tproperty: SchemaObject,\n): property is SchemaObject & { allOf: (SchemaObject | ReferenceObject)[] } {\n\treturn \"allOf\" in property && isDefined(property.allOf);\n}\n\nexport function isItemsObject(\n\tproperty: SchemaObject,\n): property is SchemaObject & {\n\titems: SchemaObject | ReferenceObject | (SchemaObject | ReferenceObject)[];\n} {\n\treturn \"items\" in property && isDefined(property.items);\n}\n","import merge from \"lodash.merge\";\nimport type {\n\tObjectSubtype,\n\tReferenceObject,\n\tSchemaObject,\n} from \"openapi-typescript\";\nimport { isRecord, isReferenceObject } from \"./guards\";\n\ntype SchemaWithDefinitions = SchemaObject &\n\tObjectSubtype & {\n\t\tdefinitions: Record<string, SchemaObject>;\n\t};\n\nfunction isSchemaWithDefinitions(\n\tschema: SchemaObject | ReferenceObject | ObjectSubtype,\n): schema is SchemaWithDefinitions {\n\treturn \"definitions\" in schema && isRecord(schema.definitions);\n}\n\nexport function getSchemaDefinition(\n\tschema: SchemaObject | ReferenceObject | ObjectSubtype,\n\tdefinition: string,\n): SchemaObject {\n\tif (isSchemaWithDefinitions(schema)) {\n\t\tconst definitionKey = definition.replace(\"#/definitions/\", \"\");\n\t\tconst definitionSchema = schema.definitions?.[definitionKey];\n\n\t\tif (!definitionSchema) {\n\t\t\tthrow new Error(`Definition not found for ${definition}`);\n\t\t}\n\n\t\treturn definitionSchema;\n\t}\n\tif (\"$defs\" in schema && isRecord(schema.$defs)) {\n\t\tconst definitionKey = definition.replace(\"#/$defs/\", \"\");\n\t\tconst definitionSchema = schema.$defs?.[definitionKey];\n\t\tif (!definitionSchema) {\n\t\t\tthrow new Error(`Definition not found for ${definition}`);\n\t\t}\n\n\t\treturn definitionSchema;\n\t}\n\n\tthrow new Error(\"Schema does not contain definitions\");\n}\n\nexport function mergeSchemaPropertyDefinition(\n\tproperty: SchemaObject | ReferenceObject,\n\tschema: SchemaObject & ObjectSubtype,\n): SchemaObject {\n\tif (isReferenceObject(property) && typeof property.$ref === \"string\") {\n\t\tconst { $ref, ...rest } = property;\n\n\t\treturn merge({}, getSchemaDefinition(schema, $ref), rest);\n\t}\n\n\treturn property as SchemaObject;\n}\n","import merge from \"lodash.merge\";\nimport type { ReferenceObject, SchemaObject } from \"openapi-typescript\";\nimport { useMemo } from \"react\";\nimport { SchemaFormInput } from \"./schema-form-input\";\nimport type { SchemaFormErrors } from \"./types/errors\";\nimport { useSchemaFormContext } from \"./use-schema-form-context\";\nimport { isReferenceObject } from \"./utilities/guards\";\nimport { getSchemaDefinition } from \"./utilities/mergeSchemaPropertyDefinition\";\n\nexport type SchemaFormInputAllOfProps = {\n\tproperty: SchemaObject & { allOf: (SchemaObject | ReferenceObject)[] };\n\tvalue: unknown;\n\tonValueChange: (value: unknown) => void;\n\terrors: SchemaFormErrors;\n\tid: string;\n};\n\nexport function SchemaFormInputAllOf({\n\tproperty,\n\tvalue,\n\tonValueChange,\n\terrors,\n\tid,\n}: SchemaFormInputAllOfProps) {\n\tconst { schema } = useSchemaFormContext();\n\n\tconst merged = useMemo(() => {\n\t\tconst { allOf, ...baseProperty } = property;\n\n\t\tconst definitions = allOf.reduce((property, definition) => {\n\t\t\tif (isReferenceObject(definition)) {\n\t\t\t\tconst reference = getSchemaDefinition(schema, definition.$ref);\n\n\t\t\t\treturn merge({}, property, reference);\n\t\t\t}\n\n\t\t\treturn merge({}, property, definition);\n\t\t}, {});\n\n\t\treturn merge({}, definitions, baseProperty);\n\t}, [property, schema]);\n\n\treturn (\n\t\t<SchemaFormInput\n\t\t\tvalue={value}\n\t\t\tonValueChange={onValueChange}\n\t\t\terrors={errors}\n\t\t\tproperty={merged}\n\t\t\tid={id}\n\t\t/>\n\t);\n}\n","import type { SchemaObject } from \"openapi-typescript\";\nimport {\n\tisArray,\n\tisDefined,\n\tisEmptyObject,\n\tisRecord,\n\tisReferenceObject,\n} from \"./guards\";\nimport { getSchemaDefinition } from \"./mergeSchemaPropertyDefinition\";\n\ntype InitialIndexContext = {\n\tproperty: SchemaObject;\n\tvalue: unknown;\n\tschema: SchemaObject;\n};\n\n/**\n * Get the index of the definition that matches the value\n * @param value - The value to match\n * @param property - The property to match\n * @param schema - The schema to match\n * @returns The index of the definition that matches the value\n */\nexport function getIndexForAnyOfPropertyValue({\n\tvalue,\n\tproperty,\n\tschema,\n}: InitialIndexContext): number {\n\tconst valueOrDefaultValue = isDefined(value) ? value : property.default;\n\n\t// if there's no value default to showing the first definition\n\tif (!isDefined(valueOrDefaultValue)) {\n\t\treturn 0;\n\t}\n\n\tconst definitions = getSchemaPropertyAnyOfDefinitions(property, schema);\n\n\tswitch (typeof valueOrDefaultValue) {\n\t\tcase \"string\":\n\t\t\treturn definitions.findIndex(\n\t\t\t\t(definition) => definition.type === \"string\",\n\t\t\t);\n\t\tcase \"number\":\n\t\t\treturn definitions.findIndex(\n\t\t\t\t(definition) =>\n\t\t\t\t\tdefinition.type === \"number\" || definition.type === \"integer\",\n\t\t\t);\n\t\tcase \"boolean\":\n\t\t\treturn definitions.findIndex(\n\t\t\t\t(definition) => definition.type === \"boolean\",\n\t\t\t);\n\t\tcase \"object\":\n\t\t\treturn getObjectDefinitionIndex(valueOrDefaultValue, definitions);\n\t\tdefault:\n\t\t\treturn -1;\n\t}\n}\n\n/**\n * Get the definitions for the anyOf property\n * @param property - The property to get the definitions for\n * @param schema - The schema to get the definitions for\n * @returns The definitions for the anyOf property\n */\nfunction getSchemaPropertyAnyOfDefinitions(\n\tproperty: SchemaObject,\n\tschema: SchemaObject,\n): SchemaObject[] {\n\tif (!property.anyOf) {\n\t\treturn [];\n\t}\n\n\treturn property.anyOf.map((definition) => {\n\t\tif (isReferenceObject(definition)) {\n\t\t\treturn getSchemaDefinition(schema, definition.$ref);\n\t\t}\n\n\t\treturn definition;\n\t});\n}\n\n/**\n * Get the index of the definition that matches a value that is an array, record, or null\n * @param value - The value to match\n * @param definitions - The definitions to match\n * @returns The index of the definition that matches the value\n */\nfunction getObjectDefinitionIndex(\n\tvalue: object | null,\n\tdefinitions: SchemaObject[],\n): number {\n\tif (isRecord(value)) {\n\t\treturn getRecordDefinitionIndex(value, definitions);\n\t}\n\n\tif (isArray(value)) {\n\t\treturn definitions.findIndex((definition) => definition.type === \"array\");\n\t}\n\n\tif (value === null) {\n\t\treturn definitions.findIndex((definition) => definition.type === \"null\");\n\t}\n\n\treturn -1;\n}\n\n/**\n * Get the index of the definition that matches a value that is an record\n * @param value - The value to match\n * @param definitions - The definitions to match\n * @returns The index of the definition that matches the value\n */\nfunction getRecordDefinitionIndex(\n\tvalue: Record<string, unknown>,\n\tdefinitions: SchemaObject[],\n): number {\n\tif (isEmptyObject(value)) {\n\t\treturn definitions.findIndex((definition) => definition.type === \"object\");\n\t}\n\n\tconst valueKeys = Object.keys(value);\n\n\tconst [index, keysInCommon] = definitions.reduce<[number, number]>(\n\t\t([resultIndex, resultKeysInCommon], definition, definitionIndex) => {\n\t\t\tif (!(\"properties\" in definition) || !definition.properties) {\n\t\t\t\treturn [resultIndex, resultKeysInCommon];\n\t\t\t}\n\n\t\t\tconst definitionKeys = Object.keys(definition.properties);\n\t\t\tconst definitionKeysInCommon = valueKeys.filter((value) =>\n\t\t\t\tdefinitionKeys.includes(value),\n\t\t\t).length;\n\n\t\t\tif (definitionKeysInCommon > resultKeysInCommon) {\n\t\t\t\treturn [definitionIndex, definitionKeysInCommon];\n\t\t\t}\n\n\t\t\treturn [resultIndex, resultKeysInCommon];\n\t\t},\n\t\t[0, 0],\n\t);\n\n\tif (keysInCommon === 0) {\n\t\treturn -1;\n\t}\n\n\treturn index;\n}\n","import type { ReferenceObject, SchemaObject } from \"openapi-typescript\";\nimport { isReferenceObject } from \"./guards\";\nimport { getSchemaDefinition } from \"./mergeSchemaPropertyDefinition\";\n\nconst schemaObjectTypeLabels: Record<string, string | undefined> = {\n\tnull: \"None\",\n\tstring: \"str\",\n\tboolean: \"bool\",\n\tinteger: \"int\",\n\tnumber: \"float\",\n\tarray: \"list\",\n\tobject: \"dict\",\n};\n\nfunction getSchemaObjectTypeLabel(property: SchemaObject): string | undefined {\n\tif (property.type && typeof property.type === \"string\") {\n\t\treturn schemaObjectTypeLabels[property.type];\n\t}\n\n\treturn undefined;\n}\n\nexport function getSchemaObjectLabel(\n\tproperty: SchemaObject | ReferenceObject,\n\tschema: SchemaObject,\n): string {\n\tif (isReferenceObject(property)) {\n\t\tconst definition = getSchemaDefinition(schema, property.$ref);\n\n\t\treturn getSchemaObjectLabel(definition, schema);\n\t}\n\n\tconst fallback = getSchemaObjectTypeLabel(property) ?? \"Field\";\n\n\treturn property.title ?? property.format ?? fallback;\n}\n","import type { ReferenceObject, SchemaObject } from \"openapi-typescript\";\nimport { useRef, useState } from \"react\";\nimport { Card } from \"../ui/card\";\nimport { ToggleGroup, ToggleGroupItem } from \"../ui/toggle-group\";\nimport { SchemaFormProperty } from \"./schema-form-property\";\nimport type { SchemaFormErrors } from \"./types/errors\";\nimport { useSchemaFormContext } from \"./use-schema-form-context\";\nimport { getIndexForAnyOfPropertyValue } from \"./utilities/getIndexForAnyOfPropertyValue\";\nimport { getSchemaObjectLabel } from \"./utilities/getSchemaObjectLabel\";\nexport type SchemaFormInputAnyOfProps = {\n\tvalue: unknown;\n\tproperty: SchemaObject & { anyOf: (SchemaObject | ReferenceObject)[] };\n\tonValueChange: (value: unknown) => void;\n\terrors: SchemaFormErrors;\n};\n\nexport function SchemaFormInputAnyOf({\n\tvalue,\n\tproperty,\n\tonValueChange,\n\terrors,\n}: SchemaFormInputAnyOfProps) {\n\tconst { schema } = useSchemaFormContext();\n\tconst [selectedIndex, setSelectedIndex] = useState(\n\t\tgetIndexForAnyOfPropertyValue({ value, property, schema }),\n\t);\n\tconst values = useRef(new Map<number, unknown>());\n\n\tfunction onSelectedIndexChange(newSelectedIndexValue: string) {\n\t\tconst newSelectedIndex = Number.parseInt(newSelectedIndexValue, 10);\n\n\t\tif (Number.isNaN(newSelectedIndex)) {\n\t\t\tthrow new Error(`Invalid index: ${newSelectedIndexValue}`);\n\t\t}\n\n\t\tvalues.current.set(selectedIndex, value);\n\n\t\tsetSelectedIndex(newSelectedIndex);\n\n\t\tonValueChange(values.current.get(newSelectedIndex));\n\t}\n\n\treturn (\n\t\t<div className=\"grid grid-cols-1 gap-2\">\n\t\t\t<ToggleGroup\n\t\t\t\tsize=\"sm\"\n\t\t\t\tvariant=\"outline\"\n\t\t\t\ttype=\"single\"\n\t\t\t\tvalue={selectedIndex.toString()}\n\t\t\t\tonValueChange={onSelectedIndexChange}\n\t\t\t\tclassName=\"justify-start\"\n\t\t\t>\n\t\t\t\t{property.anyOf.map((option, index) => {\n\t\t\t\t\tconst label = getSchemaObjectLabel(option, schema);\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ToggleGroupItem key={label} value={index.toString()}>\n\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t</ToggleGroupItem>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</ToggleGroup>\n\n\t\t\t<Card className=\"p-2\">\n\t\t\t\t<SchemaFormProperty\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tproperty={property.anyOf[selectedIndex]}\n\t\t\t\t\tonValueChange={onValueChange}\n\t\t\t\t\terrors={errors}\n\t\t\t\t\tshowLabel={false}\n\t\t\t\t\tnested={false}\n\t\t\t\t\t// This form property is nested within the anyOf property, so hard coding required to false because the anyOf property itself is what can be required\n\t\t\t\t\trequired={false}\n\t\t\t\t/>\n\t\t\t</Card>\n\t\t</div>\n\t);\n}\n","import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n","let getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n    if (!getRandomValues) {\n        if (typeof crypto === 'undefined' || !crypto.getRandomValues) {\n            throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n        }\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    return getRandomValues(rnds8);\n}\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default { randomUUID };\n","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction _v4(options, buf, offset) {\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    return _v4(options, buf, offset);\n}\nexport default v4;\n","import type { components } from \"@/api/prefect\";\nimport { isRecord } from \"../utilities/guards\";\n\nexport type SchemaValueError = string;\nexport type SchemaValuePropertyError =\n\tcomponents[\"schemas\"][\"SchemaValuePropertyError\"];\nexport type SchemaValueIndexError =\n\tcomponents[\"schemas\"][\"SchemaValueIndexError\"];\nexport type SchemaFormError =\n\t| SchemaValueError\n\t| SchemaValuePropertyError\n\t| SchemaValueIndexError;\nexport type SchemaFormErrors = SchemaFormError[];\n\nexport function isSchemaValueError(error: unknown): error is SchemaValueError {\n\treturn typeof error === \"string\";\n}\n\nexport function isSchemaValuePropertyError(\n\terror: unknown,\n): error is SchemaValuePropertyError {\n\treturn isRecord(error) && \"property\" in error;\n}\n\nexport function isSchemaValueIndexError(\n\terror: unknown,\n): error is SchemaValueIndexError {\n\treturn isRecord(error) && \"index\" in error;\n}\n","import { useMemo } from \"react\";\nimport { isSchemaValueError, type SchemaFormErrors } from \"./types/errors\";\n\nexport type SchemaFormPropertyErrorsProps = {\n\terrors: SchemaFormErrors;\n};\n\nexport function SchemaFormPropertyErrors({\n\terrors,\n}: SchemaFormPropertyErrorsProps) {\n\tconst propertyErrors = useMemo(() => {\n\t\treturn errors.filter((error) => isSchemaValueError(error));\n\t}, [errors]);\n\n\tif (propertyErrors.length === 0) {\n\t\treturn null;\n\t}\n\n\tif (propertyErrors.length === 1) {\n\t\treturn <p className=\"text-red-500 text-sm\">{propertyErrors[0]}</p>;\n\t}\n\n\treturn (\n\t\t<ul className=\"list-disc text-red-500 text-sm pl-4\">\n\t\t\t{propertyErrors.map((error) => (\n\t\t\t\t<li key={error}>{error}</li>\n\t\t\t))}\n\t\t</ul>\n\t);\n}\n","import { isDefined, isRecord, isString } from \"../utilities/guards\";\nimport { isPrefectKind, type PrefectKind } from \"./prefect-kind\";\n\ntype BasePrefectKindValue<\n\tTKind extends PrefectKind = PrefectKind,\n\tTRest extends Record<string, unknown> = Record<string, unknown>,\n> = {\n\t__prefect_kind: TKind;\n} & TRest;\n\nexport type PrefectKindValue =\n\t| PrefectKindValueJinja\n\t| PrefectKindValueJson\n\t| PrefectKindValueWorkspaceVariable;\n\nexport function getPrefectKindFromValue(value: unknown): PrefectKind | null {\n\tif (isPrefectKindValue(value)) {\n\t\treturn value.__prefect_kind;\n\t}\n\n\treturn null;\n}\n\nexport function isPrefectKindValue<T extends PrefectKind = PrefectKind>(\n\tvalue: unknown,\n\tkind?: T,\n): value is PrefectKindValue & { __prefect_kind: T } {\n\tconst isKindObject = isRecord(value) && isPrefectKind(value.__prefect_kind);\n\n\tif (!isKindObject) {\n\t\treturn false;\n\t}\n\n\tif (isPrefectKind(kind)) {\n\t\treturn value.__prefect_kind === kind;\n\t}\n\n\treturn true;\n}\n\nexport type PrefectKindValueJson = BasePrefectKindValue<\n\t\"json\",\n\t{\n\t\tvalue?: string;\n\t}\n>;\n\nexport function isPrefectKindValueJson(\n\tvalue: unknown,\n): value is PrefectKindValueJson {\n\treturn (\n\t\tisPrefectKindValue(value, \"json\") &&\n\t\t(isString(value.value) || !isDefined(value.value))\n\t);\n}\n\nexport type PrefectKindValueJinja = BasePrefectKindValue<\n\t\"jinja\",\n\t{\n\t\ttemplate?: string;\n\t}\n>;\n\nexport function isPrefectKindValueJinja(\n\tvalue: unknown,\n): value is PrefectKindValueJinja {\n\treturn isPrefectKindValue(value, \"jinja\") && isString(value.template);\n}\n\nexport type PrefectKindValueWorkspaceVariable = BasePrefectKindValue<\n\t\"workspace_variable\",\n\t{\n\t\tvariable_name?: string;\n\t}\n>;\n\nexport function isPrefectKindValueWorkspaceVariable(\n\tvalue: unknown,\n): value is PrefectKindValueWorkspaceVariable {\n\treturn (\n\t\tisPrefectKindValue(value, \"workspace_variable\") &&\n\t\t(isString(value.variable_name) || !isDefined(value.variable_name))\n\t);\n}\n","import type {\n\tArraySubtype,\n\tObjectSubtype,\n\tReferenceObject,\n\tSchemaObject,\n} from \"openapi-typescript\";\nimport type { PrefectKind } from \"../types/prefect-kind\";\nimport type {\n\tPrefectKindValueJinja,\n\tPrefectKindValueJson,\n\tPrefectKindValueWorkspaceVariable,\n} from \"../types/prefect-kind-value\";\nimport { getPrefectKindFromValue } from \"../types/prefect-kind-value\";\nimport { isAnyOfObject, isArray, isRecord } from \"./guards\";\nimport { mergeSchemaPropertyDefinition } from \"./mergeSchemaPropertyDefinition\";\n\ntype ConvertValueToPrefectKindInput = {\n\tvalue: unknown;\n\tproperty: SchemaObject | ReferenceObject | (SchemaObject | ReferenceObject)[];\n\tschema: SchemaObject & ObjectSubtype;\n\tto: PrefectKind;\n};\n\nexport function convertValueToPrefectKind({\n\tvalue,\n\tproperty,\n\tschema,\n\tto,\n}: ConvertValueToPrefectKindInput) {\n\tconst from = getPrefectKindFromValue(value);\n\n\ttry {\n\t\tswitch (from) {\n\t\t\tcase \"json\":\n\t\t\t\treturn convertPrefectKindValueJson({\n\t\t\t\t\tjson: value as PrefectKindValueJson,\n\t\t\t\t\tproperty,\n\t\t\t\t\tschema,\n\t\t\t\t\tto,\n\t\t\t\t});\n\n\t\t\tcase \"jinja\":\n\t\t\t\treturn convertPrefectKindValueJinja({\n\t\t\t\t\tjinja: value as PrefectKindValueJinja,\n\t\t\t\t\tproperty,\n\t\t\t\t\tschema,\n\t\t\t\t\tto,\n\t\t\t\t});\n\n\t\t\tcase \"workspace_variable\":\n\t\t\t\treturn convertPrefectKindValueWorkspaceVariable({\n\t\t\t\t\tworkspaceVariable: value as PrefectKindValueWorkspaceVariable,\n\t\t\t\t\tto,\n\t\t\t\t});\n\n\t\t\tcase null:\n\t\t\t\treturn convertPrefectKindValueNull({ value, property, schema, to });\n\n\t\t\tdefault:\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n\t\t\t\tthrow new Error(`Unknown prefect kind value: ${from satisfies never}`);\n\t\t}\n\t} catch (error) {\n\t\tconsole.error(error);\n\n\t\treturn undefined;\n\t}\n}\n\ntype ConvertPrefectKindValueJsonInput = {\n\tjson: PrefectKindValueJson;\n\tproperty: SchemaObject | ReferenceObject | (SchemaObject | ReferenceObject)[];\n\tschema: SchemaObject & ObjectSubtype;\n\tto: PrefectKind;\n};\n\nfunction convertPrefectKindValueJson({\n\tjson,\n\tproperty,\n\tschema,\n\tto,\n}: ConvertPrefectKindValueJsonInput): unknown {\n\tswitch (to) {\n\t\tcase \"jinja\":\n\t\t\treturn {\n\t\t\t\t__prefect_kind: \"jinja\",\n\t\t\t\ttemplate: json.value,\n\t\t\t} satisfies PrefectKindValueJinja;\n\n\t\tcase \"json\":\n\t\t\treturn json;\n\n\t\tcase \"workspace_variable\":\n\t\t\treturn {\n\t\t\t\t__prefect_kind: \"workspace_variable\",\n\t\t\t\tvariable_name: undefined,\n\t\t\t} satisfies PrefectKindValueWorkspaceVariable;\n\n\t\tcase null:\n\t\t\tif (json.value === undefined) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tconst parsed: unknown = JSON.parse(json.value);\n\n\t\t\t\treturn coerceValueToProperties({ value: parsed, property, schema });\n\t\t\t} catch {\n\t\t\t\tthrow new InvalidSchemaValueTransformation(\"json\", null);\n\t\t\t}\n\n\t\tdefault:\n\t\t\tthrow new Error(\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n\t\t\t\t`mapSchemaValueJson missing case for kind: ${to satisfies never}`,\n\t\t\t);\n\t}\n}\n\ntype ConvertPrefectKindValueJinjaInput = {\n\tjinja: PrefectKindValueJinja;\n\tproperty: SchemaObject | ReferenceObject | (SchemaObject | ReferenceObject)[];\n\tschema: SchemaObject & ObjectSubtype;\n\tto: PrefectKind;\n};\n\nfunction convertPrefectKindValueJinja({\n\tjinja,\n\tproperty,\n\tschema,\n\tto,\n}: ConvertPrefectKindValueJinjaInput): unknown {\n\tswitch (to) {\n\t\tcase \"jinja\":\n\t\t\treturn jinja;\n\n\t\tcase \"json\":\n\t\t\treturn {\n\t\t\t\t__prefect_kind: \"json\",\n\t\t\t\tvalue: jinja.template,\n\t\t\t} satisfies PrefectKindValueJson;\n\n\t\tcase \"workspace_variable\":\n\t\t\treturn {\n\t\t\t\t__prefect_kind: \"workspace_variable\",\n\t\t\t\tvariable_name: undefined,\n\t\t\t} satisfies PrefectKindValueWorkspaceVariable;\n\n\t\tcase null:\n\t\t\tif (jinja.template === undefined) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tconst parsed: unknown = JSON.parse(jinja.template);\n\n\t\t\t\treturn coerceValueToProperties({ value: parsed, property, schema });\n\t\t\t} catch {\n\t\t\t\tthrow new InvalidSchemaValueTransformation(\"jinja\", null);\n\t\t\t}\n\n\t\tdefault:\n\t\t\tthrow new Error(\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n\t\t\t\t`mapSchemaValueJson missing case for kind: ${to satisfies never}`,\n\t\t\t);\n\t}\n}\n\ntype ConvertPrefectKindValueWorkspaceVariableInput = {\n\tworkspaceVariable: PrefectKindValueWorkspaceVariable;\n\tto: PrefectKind;\n};\n\nfunction convertPrefectKindValueWorkspaceVariable({\n\tworkspaceVariable,\n\tto,\n}: ConvertPrefectKindValueWorkspaceVariableInput): unknown {\n\tswitch (to) {\n\t\tcase \"workspace_variable\":\n\t\t\treturn workspaceVariable;\n\n\t\tcase \"jinja\":\n\t\t\treturn {\n\t\t\t\t__prefect_kind: \"jinja\",\n\t\t\t\ttemplate: undefined,\n\t\t\t} satisfies PrefectKindValueJinja;\n\n\t\tcase \"json\":\n\t\t\treturn {\n\t\t\t\t__prefect_kind: \"json\",\n\t\t\t\tvalue: undefined,\n\t\t\t} satisfies PrefectKindValueJson;\n\n\t\tcase null:\n\t\t\treturn undefined;\n\n\t\tdefault:\n\t\t\tthrow new Error(\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n\t\t\t\t`mapSchemaValueWorkspaceVariable missing case for kind: ${to satisfies never}`,\n\t\t\t);\n\t}\n}\n\ntype ConvertPrefectKindValueNullInput = {\n\tvalue: unknown;\n\tproperty: SchemaObject | ReferenceObject | (SchemaObject | ReferenceObject)[];\n\tschema: SchemaObject & ObjectSubtype;\n\tto: PrefectKind;\n};\n\nfunction convertPrefectKindValueNull({\n\tvalue,\n\tproperty,\n\tschema,\n\tto,\n}: ConvertPrefectKindValueNullInput): unknown {\n\tswitch (to) {\n\t\tcase \"jinja\":\n\t\t\treturn {\n\t\t\t\t__prefect_kind: \"jinja\",\n\t\t\t\ttemplate:\n\t\t\t\t\tvalue === undefined ? undefined : JSON.stringify(value, null, 2),\n\t\t\t} satisfies PrefectKindValueJinja;\n\n\t\tcase \"json\":\n\t\t\treturn {\n\t\t\t\t__prefect_kind: \"json\",\n\t\t\t\tvalue: value === undefined ? undefined : JSON.stringify(value, null, 2),\n\t\t\t} satisfies PrefectKindValueJson;\n\n\t\tcase \"workspace_variable\":\n\t\t\treturn {\n\t\t\t\t__prefect_kind: \"workspace_variable\",\n\t\t\t\tvariable_name: undefined,\n\t\t\t} satisfies PrefectKindValueWorkspaceVariable;\n\n\t\tcase null:\n\t\t\treturn coerceValueToProperties({ value, property, schema });\n\n\t\tdefault:\n\t\t\tthrow new Error(\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n\t\t\t\t`mapSchemaValueNull missing case for kind: ${to satisfies never}`,\n\t\t\t);\n\t}\n}\n\ntype CoerceValueToPropertiesInput = {\n\tvalue: unknown;\n\tproperty: SchemaObject | ReferenceObject | (SchemaObject | ReferenceObject)[];\n\tschema: SchemaObject & ObjectSubtype;\n};\n\nfunction coerceValueToProperties({\n\tvalue,\n\tproperty,\n\tschema,\n}: CoerceValueToPropertiesInput): unknown {\n\tif (isArray(property)) {\n\t\tconst responses = property.map((property) =>\n\t\t\tcoerceValueToProperty({ value, property, schema }),\n\t\t);\n\n\t\treturn responses.find((response) => response !== undefined);\n\t}\n\n\treturn coerceValueToProperty({ value, property, schema });\n}\n\ntype CoerceValueToPropertyInput = {\n\tvalue: unknown;\n\tproperty: SchemaObject | ReferenceObject;\n\tschema: SchemaObject & ObjectSubtype;\n};\n\nfunction coerceValueToProperty({\n\tvalue,\n\tproperty,\n\tschema,\n}: CoerceValueToPropertyInput): unknown {\n\tconst merged = mergeSchemaPropertyDefinition(property, schema);\n\n\tif (isAnyOfObject(merged)) {\n\t\treturn coerceValueToProperties({ value, property: merged.anyOf, schema });\n\t}\n\n\tswitch (merged.type) {\n\t\tcase \"null\":\n\t\t\treturn null;\n\n\t\tcase \"string\":\n\t\t\treturn typeof value === \"string\" ? value : undefined;\n\n\t\tcase \"boolean\":\n\t\t\treturn typeof value === \"boolean\" ? value : undefined;\n\n\t\tcase \"number\":\n\t\t\treturn typeof value === \"number\" ? value : undefined;\n\n\t\tcase \"integer\":\n\t\t\treturn typeof value === \"number\" ? Math.round(value) : undefined;\n\n\t\tcase \"array\":\n\t\t\treturn coerceValueToArrayProperty({ value, property: merged, schema });\n\n\t\tcase \"object\":\n\t\t\treturn coerceValueToObjectProperty({ value, property: merged, schema });\n\n\t\tdefault:\n\t\t\tif (isArray(merged.type)) {\n\t\t\t\tconsole.error(\n\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\"Array types are not supported for schema coercing values to schema properties\",\n\t\t\t\t\t),\n\t\t\t\t);\n\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tthrow new Error(\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n\t\t\t\t`Unsupported property type: ${merged.type satisfies never}`,\n\t\t\t);\n\t}\n}\n\ntype CoerceValueToArrayPropertyInput = {\n\tvalue: unknown;\n\tproperty: SchemaObject & ArraySubtype;\n\tschema: SchemaObject & ObjectSubtype;\n};\n\nfunction coerceValueToArrayProperty({\n\tvalue,\n\tproperty,\n\tschema,\n}: CoerceValueToArrayPropertyInput): unknown[] | undefined {\n\tif (!isArray(value)) {\n\t\treturn undefined;\n\t}\n\n\tconst response = [...value];\n\n\treturn response.map((item) =>\n\t\tcoerceValueToProperty({ value: item, property, schema }),\n\t);\n}\n\ntype CoerceValueToObjectPropertyInput = {\n\tvalue: unknown;\n\tproperty: SchemaObject & ObjectSubtype;\n\tschema: SchemaObject & ObjectSubtype;\n};\n\nfunction coerceValueToObjectProperty({\n\tvalue,\n\tproperty,\n\tschema,\n}: CoerceValueToObjectPropertyInput): Record<string, unknown> | undefined {\n\tif (!isRecord(value)) {\n\t\treturn undefined;\n\t}\n\n\tif (property.properties === undefined) {\n\t\treturn value;\n\t}\n\n\tconst response = { ...value };\n\n\tfor (const [key, propertyValue] of Object.entries(property.properties)) {\n\t\tconst coercedValue = coerceValueToProperty({\n\t\t\tvalue: value[key],\n\t\t\tproperty: propertyValue,\n\t\t\tschema,\n\t\t});\n\n\t\tif (coercedValue === undefined) {\n\t\t\tdelete response[key];\n\t\t}\n\t}\n\n\treturn response;\n}\n\nclass InvalidSchemaValueTransformation extends Error {\n\tpublic constructor(from: PrefectKind, to: PrefectKind | null) {\n\t\tsuper(\n\t\t\t`Unable to convert prefect kind value from \"${from}\" to \"${to ?? \"null\"}\"`,\n\t\t);\n\t}\n}\n","import type { ReferenceObject, SchemaObject } from \"openapi-typescript\";\nimport { type ReactNode, useMemo, useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tDropdownMenu,\n\tDropdownMenuContent,\n\tDropdownMenuItem,\n\tDropdownMenuSeparator,\n\tDropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Icon } from \"@/components/ui/icons\";\nimport {\n\tgetPrefectKindLabel,\n\ttype PrefectKind,\n\tprefectKinds,\n} from \"./types/prefect-kind\";\nimport { getPrefectKindFromValue } from \"./types/prefect-kind-value\";\nimport { useSchemaFormContext } from \"./use-schema-form-context\";\nimport { convertValueToPrefectKind } from \"./utilities/convertValueToPrefectKind\";\n\nexport type SchemaFormPropertyMenuProps = {\n\tvalue: unknown;\n\tonValueChange: (value: unknown) => void;\n\tproperty: SchemaObject | ReferenceObject | (SchemaObject | ReferenceObject)[];\n\tdisableKinds?: boolean;\n\tchildren?: ReactNode;\n\tdefaultValue?: unknown;\n\thasDefaultValue?: boolean;\n};\n\nexport const SchemaFormPropertyMenu = ({\n\tvalue,\n\tonValueChange,\n\tproperty,\n\tchildren,\n\tdisableKinds,\n\tdefaultValue,\n\thasDefaultValue,\n}: SchemaFormPropertyMenuProps) => {\n\tconst { schema, kinds } = useSchemaFormContext();\n\tconst [open, setOpen] = useState(false);\n\n\tconst isDefaultValueDisabled =\n\t\t!hasDefaultValue || JSON.stringify(value) === JSON.stringify(defaultValue);\n\n\tfunction handleUseDefaultValue() {\n\t\tif (hasDefaultValue) {\n\t\t\tonValueChange(defaultValue);\n\t\t}\n\t}\n\n\tfunction convertValueKind(kind: PrefectKind) {\n\t\tconst newValue = convertValueToPrefectKind({\n\t\t\tvalue,\n\t\t\tproperty,\n\t\t\tschema,\n\t\t\tto: kind,\n\t\t});\n\n\t\tonValueChange(newValue);\n\t}\n\n\tconst kindOptions = useMemo(() => {\n\t\tconst current = getPrefectKindFromValue(value);\n\n\t\treturn prefectKinds.filter(\n\t\t\t(kind) =>\n\t\t\t\tkind !== current &&\n\t\t\t\t(kinds.includes(kind) || kind === null) &&\n\t\t\t\t!disableKinds,\n\t\t);\n\t}, [value, kinds, disableKinds]);\n\n\treturn (\n\t\t<DropdownMenu open={open} onOpenChange={setOpen}>\n\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t<Button variant=\"ghost\" data-open={open} className=\"h-8 w-8 p-0\">\n\t\t\t\t\t<span className=\"sr-only\">Open menu</span>\n\t\t\t\t\t<Icon id=\"MoreVertical\" className=\"size-4\" />\n\t\t\t\t</Button>\n\t\t\t</DropdownMenuTrigger>\n\t\t\t<DropdownMenuContent align=\"end\">\n\t\t\t\t{kindOptions.map((kind) => (\n\t\t\t\t\t<DropdownMenuItem key={kind} onClick={() => convertValueKind(kind)}>\n\t\t\t\t\t\t{getPrefectKindLabel(kind)}\n\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t))}\n\n\t\t\t\t{hasDefaultValue && (\n\t\t\t\t\t<DropdownMenuItem\n\t\t\t\t\t\tonClick={handleUseDefaultValue}\n\t\t\t\t\t\tdisabled={isDefaultValueDisabled}\n\t\t\t\t\t>\n\t\t\t\t\t\tUse default value\n\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t)}\n\n\t\t\t\t<DropdownMenuSeparator />\n\n\t\t\t\t{children}\n\t\t\t</DropdownMenuContent>\n\t\t</DropdownMenu>\n\t);\n};\n","import { useSortable } from \"@dnd-kit/sortable\";\nimport { CSS } from \"@dnd-kit/utilities\";\nimport { GripVertical } from \"lucide-react\";\nimport type { ReferenceObject, SchemaObject } from \"openapi-typescript\";\nimport { useId, useMemo } from \"react\";\nimport { DropdownMenuItem } from \"../ui/dropdown-menu\";\nimport { SchemaFormInput } from \"./schema-form-input\";\nimport { SchemaFormPropertyErrors } from \"./schema-form-property-errors\";\nimport { SchemaFormPropertyMenu } from \"./schema-form-property-menu\";\nimport type { SchemaFormErrors } from \"./types/errors\";\nimport { useSchemaFormContext } from \"./use-schema-form-context\";\nimport { isArray, isReferenceObject } from \"./utilities/guards\";\nimport { getSchemaDefinition } from \"./utilities/mergeSchemaPropertyDefinition\";\n\nexport type SchemaFormInputArrayItemProps = {\n\titemKey: string;\n\titems: SchemaObject | ReferenceObject | (SchemaObject | ReferenceObject)[];\n\tvalue: unknown;\n\tonValueChange: (value: unknown) => void;\n\terrors: SchemaFormErrors;\n\tonDelete: () => void;\n\tfirst: boolean;\n\tlast: boolean;\n\tcanMove: boolean;\n\tmoveUp: () => void;\n\tmoveDown: () => void;\n\tmoveToTop: () => void;\n\tmoveToBottom: () => void;\n};\n\nexport function SchemaFormInputArrayItem({\n\titemKey,\n\titems,\n\tvalue,\n\tonValueChange,\n\terrors,\n\tonDelete,\n\tfirst,\n\tlast,\n\tcanMove,\n\tmoveUp,\n\tmoveDown,\n\tmoveToTop,\n\tmoveToBottom,\n}: SchemaFormInputArrayItemProps) {\n\tconst { schema } = useSchemaFormContext();\n\tconst id = useId();\n\n\tconst {\n\t\tattributes,\n\t\tlisteners,\n\t\tsetNodeRef,\n\t\ttransform,\n\t\ttransition,\n\t\tisDragging,\n\t} = useSortable({ id: itemKey, disabled: !canMove });\n\n\tconst style = {\n\t\ttransform: CSS.Transform.toString(transform),\n\t\ttransition,\n\t\topacity: isDragging ? 0.5 : 1,\n\t};\n\n\tconst property = useMemo(() => {\n\t\tif (isArray(items)) {\n\t\t\t// @ts-expect-error The SchemaObject type requires a type property but in an anyOf property the type comes from the anyOf property\n\t\t\tconst property: SchemaObject = {\n\t\t\t\tanyOf: items,\n\t\t\t};\n\n\t\t\treturn property;\n\t\t}\n\n\t\tif (isReferenceObject(items)) {\n\t\t\treturn getSchemaDefinition(schema, items.$ref);\n\t\t}\n\n\t\treturn items;\n\t}, [items, schema]);\n\n\treturn (\n\t\t<div\n\t\t\tref={setNodeRef}\n\t\t\tstyle={style}\n\t\t\tclassName=\"grid grid-cols-[auto_1fr_auto] gap-2\"\n\t\t>\n\t\t\t{canMove ? (\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclassName=\"flex items-center justify-center cursor-grab text-muted-foreground hover:text-foreground focus:outline-none\"\n\t\t\t\t\taria-label=\"Drag to reorder\"\n\t\t\t\t\t{...attributes}\n\t\t\t\t\t{...listeners}\n\t\t\t\t>\n\t\t\t\t\t<GripVertical className=\"h-5 w-5\" />\n\t\t\t\t</button>\n\t\t\t) : (\n\t\t\t\t<div className=\"w-5\" />\n\t\t\t)}\n\t\t\t<div className=\"grid grid-cols-1 gap-2\">\n\t\t\t\t<SchemaFormInput\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tonValueChange={onValueChange}\n\t\t\t\t\tproperty={property}\n\t\t\t\t\terrors={errors}\n\t\t\t\t\tid={id}\n\t\t\t\t/>\n\t\t\t\t<SchemaFormPropertyErrors errors={errors} />\n\t\t\t</div>\n\t\t\t<SchemaFormPropertyMenu\n\t\t\t\tvalue={value}\n\t\t\t\tonValueChange={onValueChange}\n\t\t\t\tproperty={items}\n\t\t\t>\n\t\t\t\t<DropdownMenuItem onClick={onDelete}>Delete</DropdownMenuItem>\n\t\t\t\t{canMove && !first && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<DropdownMenuItem onClick={moveToTop}>Move to top</DropdownMenuItem>\n\t\t\t\t\t\t<DropdownMenuItem onClick={moveUp}>Move up</DropdownMenuItem>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t{canMove && !last && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<DropdownMenuItem onClick={moveDown}>Move down</DropdownMenuItem>\n\t\t\t\t\t\t<DropdownMenuItem onClick={moveToBottom}>\n\t\t\t\t\t\t\tMove to bottom\n\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</SchemaFormPropertyMenu>\n\t\t</div>\n\t);\n}\n","import {\n\tclosestCenter,\n\tDndContext,\n\ttype DragEndEvent,\n\tKeyboardSensor,\n\tPointerSensor,\n\tuseSensor,\n\tuseSensors,\n} from \"@dnd-kit/core\";\nimport {\n\tSortableContext,\n\tsortableKeyboardCoordinates,\n\tverticalListSortingStrategy,\n} from \"@dnd-kit/sortable\";\nimport type { ArraySubtype, SchemaObject } from \"openapi-typescript\";\nimport { useState } from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { Button } from \"../ui/button\";\nimport { Card } from \"../ui/card\";\nimport { SchemaFormInputArrayItem } from \"./schema-form-input-array-item\";\nimport {\n\tisSchemaValueIndexError,\n\ttype SchemaFormErrors,\n\ttype SchemaValueIndexError,\n} from \"./types/errors\";\nimport { isArray } from \"./utilities/guards\";\nexport type SchemaFormInputArrayListProps = {\n\tproperty: SchemaObject & ArraySubtype;\n\tvalues: unknown[] | undefined;\n\tonValuesChange: (values: unknown[] | undefined) => void;\n\terrors: SchemaFormErrors;\n};\n\nexport function SchemaFormInputArrayList({\n\tproperty,\n\tvalues,\n\tonValuesChange,\n\terrors,\n}: SchemaFormInputArrayListProps) {\n\tconst isEmpty = values === undefined || values.length === 0;\n\tconst canAddMore =\n\t\tproperty.maxItems === undefined ||\n\t\t(values?.length ?? 0) < (property.maxItems ?? Number.POSITIVE_INFINITY);\n\n\tconst prefixItemsCount = isArray(property.prefixItems)\n\t\t? property.prefixItems.length\n\t\t: 0;\n\n\tconst sensors = useSensors(\n\t\tuseSensor(PointerSensor),\n\t\tuseSensor(KeyboardSensor, {\n\t\t\tcoordinateGetter: sortableKeyboardCoordinates,\n\t\t}),\n\t);\n\n\tconst [localKeyedValues, setLocalKeyedValues] = useState<\n\t\t{\n\t\t\tkey: string;\n\t\t\tvalue: unknown;\n\t\t}[]\n\t>(\n\t\tvalues?.map((value) => ({\n\t\t\tkey: uuidv4(),\n\t\t\tvalue,\n\t\t})) ?? [],\n\t);\n\n\tfunction getPropertyForIndex(index: number) {\n\t\tif (isArray(property.prefixItems) && index < property.prefixItems.length) {\n\t\t\treturn property.prefixItems[index];\n\t\t}\n\n\t\treturn property.items ?? { type: \"string\" };\n\t}\n\n\tfunction getErrorsForIndex(index: number) {\n\t\treturn errors\n\t\t\t.filter(\n\t\t\t\t(error): error is SchemaValueIndexError =>\n\t\t\t\t\tisSchemaValueIndexError(error) && error.index === index,\n\t\t\t)\n\t\t\t.flatMap((error) => error.errors);\n\t}\n\n\tfunction getFirstForIndex(index: number): boolean {\n\t\treturn index === 0;\n\t}\n\n\tfunction getLastForIndex(index: number): boolean {\n\t\treturn index === (values?.length ?? 0) - 1;\n\t}\n\n\tfunction getCanMoveForIndex(index: number): boolean {\n\t\tconst isPrefixItem =\n\t\t\tisArray(property.prefixItems) && index < property.prefixItems.length;\n\n\t\treturn !isPrefixItem;\n\t}\n\n\tfunction handleValueChange(key: string, value: unknown) {\n\t\tsetLocalKeyedValues(\n\t\t\tlocalKeyedValues.map((item) =>\n\t\t\t\titem.key === key ? { ...item, value } : item,\n\t\t\t),\n\t\t);\n\t}\n\n\tfunction addItem() {\n\t\tconst newKeyedValues = [\n\t\t\t...localKeyedValues,\n\t\t\t{ key: uuidv4(), value: undefined },\n\t\t];\n\t\tsetLocalKeyedValues(newKeyedValues);\n\t\tonValuesChange(newKeyedValues.map(({ value }) => value));\n\t}\n\n\tfunction moveItem(from: number, to: number) {\n\t\tconst newValues = [...localKeyedValues];\n\t\tnewValues.splice(to, 0, newValues.splice(from, 1)[0]);\n\t\tsetLocalKeyedValues(newValues);\n\t\tonValuesChange(newValues.map(({ value }) => value));\n\t}\n\n\tfunction moveToTop(index: number) {\n\t\tmoveItem(index, 0);\n\t}\n\n\tfunction moveToBottom(index: number) {\n\t\tmoveItem(index, localKeyedValues.length - 1);\n\t}\n\n\tfunction deleteItem(key: string) {\n\t\tconst newValues = localKeyedValues.filter((item) => item.key !== key);\n\t\tsetLocalKeyedValues(newValues);\n\t\tonValuesChange(newValues.map(({ value }) => value));\n\t}\n\n\tfunction handleDragEnd(event: DragEndEvent) {\n\t\tconst { active, over } = event;\n\n\t\tif (over && active.id !== over.id) {\n\t\t\tconst oldIndex = localKeyedValues.findIndex(\n\t\t\t\t(item) => item.key === active.id,\n\t\t\t);\n\t\t\tconst newIndex = localKeyedValues.findIndex(\n\t\t\t\t(item) => item.key === over.id,\n\t\t\t);\n\n\t\t\tif (oldIndex !== -1 && newIndex !== -1) {\n\t\t\t\tmoveItem(oldIndex, newIndex);\n\t\t\t}\n\t\t}\n\t}\n\n\t// Get the keys of items that can be dragged (non-prefix items)\n\tconst sortableKeys = localKeyedValues\n\t\t.slice(prefixItemsCount)\n\t\t.map((item) => item.key);\n\n\treturn (\n\t\t<Card className=\"flex flex-col gap-2 p-2\">\n\t\t\t{isEmpty && (\n\t\t\t\t<p className=\"text-sm text-subdued italic\">No items in this list</p>\n\t\t\t)}\n\n\t\t\t<DndContext\n\t\t\t\tsensors={sensors}\n\t\t\t\tcollisionDetection={closestCenter}\n\t\t\t\tonDragEnd={handleDragEnd}\n\t\t\t>\n\t\t\t\t<SortableContext\n\t\t\t\t\titems={sortableKeys}\n\t\t\t\t\tstrategy={verticalListSortingStrategy}\n\t\t\t\t>\n\t\t\t\t\t{localKeyedValues?.map(({ key, value }, index) => (\n\t\t\t\t\t\t<SchemaFormInputArrayItem\n\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\titemKey={key}\n\t\t\t\t\t\t\titems={getPropertyForIndex(index)}\n\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\tonValueChange={(value) => handleValueChange(key, value)}\n\t\t\t\t\t\t\terrors={getErrorsForIndex(index)}\n\t\t\t\t\t\t\tonDelete={() => deleteItem(key)}\n\t\t\t\t\t\t\tfirst={getFirstForIndex(index)}\n\t\t\t\t\t\t\tlast={getLastForIndex(index)}\n\t\t\t\t\t\t\tcanMove={getCanMoveForIndex(index)}\n\t\t\t\t\t\t\tmoveUp={() => moveItem(index, index - 1)}\n\t\t\t\t\t\t\tmoveDown={() => moveItem(index, index + 1)}\n\t\t\t\t\t\t\tmoveToTop={() => moveToTop(index)}\n\t\t\t\t\t\t\tmoveToBottom={() => moveToBottom(index)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</SortableContext>\n\t\t\t</DndContext>\n\n\t\t\t{canAddMore && (\n\t\t\t\t<div className=\"flex justify-end\">\n\t\t\t\t\t<Button size=\"sm\" variant=\"outline\" onClick={addItem}>\n\t\t\t\t\t\tAdd item\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{!canAddMore && (\n\t\t\t\t<p className=\"text-sm text-subdued text-right\">\n\t\t\t\t\tYou can&apos;t add more items\n\t\t\t\t</p>\n\t\t\t)}\n\t\t</Card>\n\t);\n}\n","import type { SchemaObject } from \"openapi-typescript\";\nimport { useMemo, useState } from \"react\";\nimport {\n\tCombobox,\n\tComboboxCommandEmtpy,\n\tComboboxCommandInput,\n\tComboboxCommandItem,\n\tComboboxCommandList,\n\tComboboxContent,\n\tComboboxTrigger,\n} from \"../ui/combobox\";\nimport type { PrimitiveProperty } from \"./types/primitives\";\nimport type { WithPrimitiveEnum } from \"./types/schemas\";\n\ntype SingleValueProps<T extends PrimitiveProperty> = {\n\tvalue: T | undefined;\n\tmultiple: false;\n\tonValueChange: (value: T | undefined) => void;\n};\n\ntype MultipleValueProps<T extends PrimitiveProperty> = {\n\tvalues: T[] | undefined;\n\tmultiple: true;\n\tonValuesChange: (values: T[] | undefined) => void;\n};\n\ntype SchemaFormInputArrayComboboxProps<T extends PrimitiveProperty> = {\n\tproperty: SchemaObject & WithPrimitiveEnum;\n\tid: string;\n} & (SingleValueProps<T> | MultipleValueProps<T>);\n\nexport function SchemaFormInputEnum<T extends PrimitiveProperty>({\n\tproperty,\n\tid,\n\t...props\n}: SchemaFormInputArrayComboboxProps<T>) {\n\tconst [search, setSearch] = useState(\"\");\n\n\tconst options = useMemo(() => {\n\t\treturn Object.fromEntries(\n\t\t\tObject.entries(property.enum).filter(([, value]) =>\n\t\t\t\tString(value).toLowerCase().includes(search.toLowerCase()),\n\t\t\t),\n\t\t);\n\t}, [property.enum, search]);\n\n\tconst selected = Boolean(props.multiple ? props.values?.length : props.value);\n\tconst label = props.multiple ? props.values?.join(\", \") : String(props.value);\n\n\tfunction isSelected(key: string) {\n\t\tconst value = options[key] as T;\n\n\t\treturn props.multiple\n\t\t\t? props.values?.includes(value)\n\t\t\t: props.value === value;\n\t}\n\n\tfunction onSelect(key: string) {\n\t\tsetSearch(\"\");\n\n\t\tconst value = options[key] as T;\n\n\t\treturn props.multiple ? onSelectMultiple(value) : onSelectSingle(value);\n\t}\n\n\tfunction onSelectSingle(value: T) {\n\t\tif (props.multiple) {\n\t\t\tthrow new Error(\"onSingleSelect called on multiple value input\");\n\t\t}\n\n\t\tprops.onValueChange(value);\n\t}\n\n\tfunction onSelectMultiple(value: T) {\n\t\tif (!props.multiple) {\n\t\t\tthrow new Error(\"onMultipleSelect called on single value input\");\n\t\t}\n\n\t\tif (!props.values) {\n\t\t\tprops.onValuesChange([value]);\n\t\t\treturn;\n\t\t}\n\n\t\tif (props.values?.includes(value)) {\n\t\t\tprops.onValuesChange(props.values.filter((v) => v !== value));\n\t\t\treturn;\n\t\t}\n\n\t\tprops.onValuesChange([...props.values, value]);\n\t}\n\n\treturn (\n\t\t<Combobox>\n\t\t\t<ComboboxTrigger\n\t\t\t\tselected={selected}\n\t\t\t\taria-label={`Select ${property.title}`}\n\t\t\t\tid={id}\n\t\t\t>\n\t\t\t\t{selected ? label : \"Select\"}\n\t\t\t</ComboboxTrigger>\n\t\t\t<ComboboxContent>\n\t\t\t\t<ComboboxCommandInput\n\t\t\t\t\tvalue={search}\n\t\t\t\t\tonValueChange={setSearch}\n\t\t\t\t\tplaceholder=\"Search...\"\n\t\t\t\t/>\n\t\t\t\t<ComboboxCommandEmtpy>No values found</ComboboxCommandEmtpy>\n\t\t\t\t<ComboboxCommandList>\n\t\t\t\t\t{Object.entries(options).map(([index, value]) => (\n\t\t\t\t\t\t<ComboboxCommandItem\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tvalue={index}\n\t\t\t\t\t\t\tonSelect={onSelect}\n\t\t\t\t\t\t\tselected={isSelected(index)}\n\t\t\t\t\t\t\tcloseOnSelect={!props.multiple}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{String(value)}\n\t\t\t\t\t\t</ComboboxCommandItem>\n\t\t\t\t\t))}\n\t\t\t\t</ComboboxCommandList>\n\t\t\t</ComboboxContent>\n\t\t</Combobox>\n\t);\n}\n","import type { ObjectSubtype, SchemaObject } from \"openapi-typescript\";\nimport {\n\tisPrimitivePropertyType,\n\ttype PrimitivePropertyType,\n} from \"./primitives\";\n\nexport type WithPosition = {\n\tposition?: number;\n};\n\nexport type PrefectObjectSubtype = {\n\tproperties?: {\n\t\t[name: string]: WithPosition;\n\t};\n};\n\nexport type WithBlockDocumentSlug = {\n\tblock_type_slug?: string;\n};\n\nexport type WithDefinitions = {\n\tdefinitions?: {\n\t\t[name: string]: SchemaObject;\n\t};\n};\n\nexport type PrefectSchemaObject = SchemaObject &\n\tObjectSubtype &\n\tWithBlockDocumentSlug &\n\tWithDefinitions;\n\nexport type WithPrimitiveEnum = {\n\tenum: PrimitivePropertyType[];\n};\n\nexport function isWithPrimitiveEnum<T extends SchemaObject>(\n\tproperty: T,\n): property is T & WithPrimitiveEnum {\n\treturn (\n\t\t\"enum\" in property &&\n\t\tArray.isArray(property.enum) &&\n\t\tproperty.enum.every((value) => isPrimitivePropertyType(typeof value))\n\t);\n}\n","import type { PrimitiveProperty } from \"../types/primitives\";\nimport { isRecord } from \"./guards\";\n\ntype PrimitiveConstructor =\n\t| BooleanConstructor\n\t| NumberConstructor\n\t| StringConstructor;\n\nexport function asType<T extends PrimitiveConstructor>(\n\tvalue: unknown,\n\ttype: T,\n): ReturnType<T> | undefined {\n\tif (typeof value === typeof type()) {\n\t\treturn value as ReturnType<T>;\n\t}\n\n\treturn undefined;\n}\n\nexport function asObject(value: unknown): Record<string, unknown> | undefined {\n\tif (isRecord(value)) {\n\t\treturn value;\n\t}\n\n\treturn undefined;\n}\n\nexport function asPrimitive(value: unknown): PrimitiveProperty | undefined {\n\treturn (\n\t\tasType(value, String) ?? asType(value, Number) ?? asType(value, Boolean)\n\t);\n}\n\nexport function asArray(value: unknown): unknown[] | undefined;\nexport function asArray(\n\tvalue: unknown,\n\ttype: BooleanConstructor,\n): boolean[] | undefined;\nexport function asArray(\n\tvalue: unknown,\n\ttype: NumberConstructor,\n): number[] | undefined;\nexport function asArray(\n\tvalue: unknown,\n\ttype: StringConstructor,\n): string[] | undefined;\nexport function asArray(\n\tvalue: unknown,\n\ttype: \"primitive\",\n): PrimitiveProperty[] | undefined;\nexport function asArray(\n\tvalue: unknown,\n\ttype?: \"primitive\" | PrimitiveConstructor,\n): unknown[] | undefined {\n\tif (type === undefined && Array.isArray(value)) {\n\t\treturn value as unknown[];\n\t}\n\n\tif (!Array.isArray(value)) {\n\t\treturn undefined;\n\t}\n\n\tswitch (type) {\n\t\tcase String:\n\t\t\treturn value\n\t\t\t\t.map((value) => asType(value, String))\n\t\t\t\t.filter((value) => value !== undefined);\n\t\tcase Number:\n\t\t\treturn value\n\t\t\t\t.map((value) => asType(value, Number))\n\t\t\t\t.filter((value) => value !== undefined);\n\t\tcase Boolean:\n\t\t\treturn value\n\t\t\t\t.map((value) => asType(value, Boolean))\n\t\t\t\t.filter((value) => value !== undefined);\n\t\tcase \"primitive\":\n\t\t\treturn value\n\t\t\t\t.map(\n\t\t\t\t\t(value) =>\n\t\t\t\t\t\tasType(value, String) ??\n\t\t\t\t\t\tasType(value, Number) ??\n\t\t\t\t\t\tasType(value, Boolean),\n\t\t\t\t)\n\t\t\t\t.filter((value) => value !== undefined);\n\t\tdefault:\n\t\t\t// eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n\t\t\tthrow new Error(`Invalid array type: ${type}`);\n\t}\n}\n","import type {\n\tArraySubtype,\n\tReferenceObject,\n\tSchemaObject,\n} from \"openapi-typescript\";\nimport { SchemaFormInputArrayList } from \"./schema-form-input-array-list\";\nimport { SchemaFormInputEnum } from \"./schema-form-input-enum\";\nimport type { SchemaFormErrors } from \"./types/errors\";\nimport { isWithPrimitiveEnum } from \"./types/schemas\";\nimport { useSchemaFormContext } from \"./use-schema-form-context\";\nimport { asArray } from \"./utilities/asType\";\nimport { isItemsObject, isRecord, isReferenceObject } from \"./utilities/guards\";\nimport { getSchemaDefinition } from \"./utilities/mergeSchemaPropertyDefinition\";\n\ntype SchemaFormInputArrayProps = {\n\tvalues: unknown[] | undefined;\n\tonValuesChange: (values: unknown[] | undefined) => void;\n\tproperty: SchemaObject & ArraySubtype;\n\terrors: SchemaFormErrors;\n\tid: string;\n};\n\nexport function SchemaFormInputArray({\n\tvalues,\n\tproperty,\n\tonValuesChange,\n\terrors,\n\tid,\n}: SchemaFormInputArrayProps) {\n\tconst { schema } = useSchemaFormContext();\n\n\tfunction handleValuesChange(values: unknown[] | undefined) {\n\t\tif (values === undefined || values.length === 0) {\n\t\t\tonValuesChange(undefined);\n\t\t\treturn;\n\t\t}\n\n\t\tonValuesChange(values);\n\t}\n\n\tif (isItemsObject(property) && isRecord(property.items)) {\n\t\tlet items: SchemaObject | ReferenceObject = property.items;\n\n\t\tif (isReferenceObject(items)) {\n\t\t\titems = getSchemaDefinition(schema, items.$ref);\n\t\t}\n\n\t\tif (isWithPrimitiveEnum(items)) {\n\t\t\tconst merged = { ...property, ...items };\n\n\t\t\treturn (\n\t\t\t\t<SchemaFormInputEnum\n\t\t\t\t\tmultiple={true}\n\t\t\t\t\tvalues={asArray(values, \"primitive\")}\n\t\t\t\t\tproperty={merged}\n\t\t\t\t\tonValuesChange={handleValuesChange}\n\t\t\t\t\tid={id}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t}\n\n\treturn (\n\t\t<SchemaFormInputArrayList\n\t\t\tproperty={property}\n\t\t\tvalues={values}\n\t\t\tonValuesChange={handleValuesChange}\n\t\t\terrors={errors}\n\t\t/>\n\t);\n}\n","import { useSuspenseQuery } from \"@tanstack/react-query\";\nimport { Suspense, useDeferredValue, useMemo, useState } from \"react\";\nimport { buildListFilterBlockDocumentsQuery } from \"@/api/block-documents\";\nimport {\n\tCombobox,\n\tComboboxCommandEmtpy,\n\tComboboxCommandGroup,\n\tComboboxCommandInput,\n\tComboboxCommandItem,\n\tComboboxCommandList,\n\tComboboxContent,\n\tComboboxTrigger,\n} from \"@/components/ui/combobox\";\nimport { Icon } from \"@/components/ui/icons\";\n\ntype BlockDocumentComboboxProps = {\n\tblockTypeSlug: string;\n\tselectedBlockDocumentId: string | undefined;\n\tonSelect: (blockDocumentId: string | undefined) => void;\n\tonCreateNew?: () => void;\n};\n\nexport const BlockDocumentCombobox = ({\n\tblockTypeSlug,\n\tselectedBlockDocumentId,\n\tonSelect,\n\tonCreateNew,\n}: BlockDocumentComboboxProps) => {\n\treturn (\n\t\t<Suspense>\n\t\t\t<BlockDocumentComboboxImplementation\n\t\t\t\tblockTypeSlug={blockTypeSlug}\n\t\t\t\tselectedBlockDocumentId={selectedBlockDocumentId}\n\t\t\t\tonSelect={onSelect}\n\t\t\t\tonCreateNew={onCreateNew}\n\t\t\t/>\n\t\t</Suspense>\n\t);\n};\n\nconst BlockDocumentComboboxImplementation = ({\n\tblockTypeSlug,\n\tselectedBlockDocumentId,\n\tonSelect,\n\tonCreateNew,\n}: BlockDocumentComboboxProps) => {\n\tconst [search, setSearch] = useState(\"\");\n\tconst deferredSearch = useDeferredValue(search);\n\n\tconst { data } = useSuspenseQuery(\n\t\tbuildListFilterBlockDocumentsQuery({\n\t\t\toffset: 0,\n\t\t\tsort: \"BLOCK_TYPE_AND_NAME_ASC\",\n\t\t\tinclude_secrets: false,\n\t\t\tblock_types: {\n\t\t\t\tslug: { any_: [blockTypeSlug] },\n\t\t\t},\n\t\t\tblock_documents: {\n\t\t\t\toperator: \"and_\",\n\t\t\t\tis_anonymous: { eq_: false },\n\t\t\t\t...(deferredSearch ? { name: { like_: deferredSearch } } : {}),\n\t\t\t},\n\t\t\tlimit: 50,\n\t\t}),\n\t);\n\n\tconst filteredData = useMemo(() => {\n\t\treturn data.filter((blockDocument) =>\n\t\t\tblockDocument.name?.toLowerCase().includes(deferredSearch.toLowerCase()),\n\t\t);\n\t}, [data, deferredSearch]);\n\n\tconst selectedBlockDocument = useMemo(() => {\n\t\treturn data.find(\n\t\t\t(blockDocument) => blockDocument.id === selectedBlockDocumentId,\n\t\t);\n\t}, [data, selectedBlockDocumentId]);\n\n\treturn (\n\t\t<Combobox>\n\t\t\t<ComboboxTrigger\n\t\t\t\tselected={Boolean(selectedBlockDocumentId)}\n\t\t\t\taria-label=\"Select a block\"\n\t\t\t>\n\t\t\t\t{selectedBlockDocument?.name ?? \"Select a block...\"}\n\t\t\t</ComboboxTrigger>\n\t\t\t<ComboboxContent>\n\t\t\t\t<ComboboxCommandInput\n\t\t\t\t\tvalue={search}\n\t\t\t\t\tonValueChange={setSearch}\n\t\t\t\t\tplaceholder=\"Search for a block...\"\n\t\t\t\t/>\n\t\t\t\t<ComboboxCommandEmtpy>No block found</ComboboxCommandEmtpy>\n\t\t\t\t<ComboboxCommandList>\n\t\t\t\t\t<ComboboxCommandGroup>\n\t\t\t\t\t\t{filteredData.map((blockDocument) => (\n\t\t\t\t\t\t\t<ComboboxCommandItem\n\t\t\t\t\t\t\t\tkey={blockDocument.id}\n\t\t\t\t\t\t\t\tselected={selectedBlockDocumentId === blockDocument.id}\n\t\t\t\t\t\t\t\tonSelect={(value) => {\n\t\t\t\t\t\t\t\t\tonSelect(value);\n\t\t\t\t\t\t\t\t\tsetSearch(\"\");\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tvalue={blockDocument.id}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{blockDocument.name}\n\t\t\t\t\t\t\t</ComboboxCommandItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ComboboxCommandGroup>\n\t\t\t\t\t{onCreateNew && (\n\t\t\t\t\t\t<ComboboxCommandGroup>\n\t\t\t\t\t\t\t<ComboboxCommandItem\n\t\t\t\t\t\t\t\tonSelect={() => {\n\t\t\t\t\t\t\t\t\tonCreateNew();\n\t\t\t\t\t\t\t\t\tsetSearch(\"\");\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tvalue=\"__create_new__\"\n\t\t\t\t\t\t\t\tcloseOnSelect={true}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Icon id=\"Plus\" className=\"mr-2 size-4\" />\n\t\t\t\t\t\t\t\tCreate new block\n\t\t\t\t\t\t\t</ComboboxCommandItem>\n\t\t\t\t\t\t</ComboboxCommandGroup>\n\t\t\t\t\t)}\n\t\t\t\t</ComboboxCommandList>\n\t\t\t</ComboboxContent>\n\t\t</Combobox>\n\t);\n};\n","import { useSuspenseQuery } from \"@tanstack/react-query\";\nimport { Suspense, useState } from \"react\";\nimport { buildCountFilterBlockDocumentsQuery } from \"@/api/block-documents\";\nimport { buildGetBlockTypeQuery } from \"@/api/block-types\";\nimport { BlockTypeLogo } from \"@/components/block-type-logo/block-type-logo\";\nimport { BlockDocumentCombobox } from \"@/components/blocks/block-document-combobox\";\nimport { BlockDocumentCreateDialog } from \"@/components/blocks/block-document-create-dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Icon } from \"@/components/ui/icons\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\n\ntype BlockDocumentReferenceValue =\n\t| {\n\t\t\t$ref: string;\n\t  }\n\t| undefined;\n\ntype SchemaFormInputBlockDocumentProps = {\n\tvalue: BlockDocumentReferenceValue;\n\tonValueChange: (value: BlockDocumentReferenceValue) => void;\n\tblockTypeSlug: string;\n\tid: string;\n};\n\nexport function SchemaFormInputBlockDocument({\n\tvalue,\n\tonValueChange,\n\tblockTypeSlug,\n\tid,\n}: SchemaFormInputBlockDocumentProps) {\n\treturn (\n\t\t<Suspense fallback={<SchemaFormInputBlockDocumentSkeleton />}>\n\t\t\t<SchemaFormInputBlockDocumentContent\n\t\t\t\tvalue={value}\n\t\t\t\tonValueChange={onValueChange}\n\t\t\t\tblockTypeSlug={blockTypeSlug}\n\t\t\t\tid={id}\n\t\t\t/>\n\t\t</Suspense>\n\t);\n}\n\nfunction SchemaFormInputBlockDocumentSkeleton() {\n\treturn (\n\t\t<div className=\"flex items-center gap-2\">\n\t\t\t<Skeleton className=\"size-8 rounded\" />\n\t\t\t<Skeleton className=\"h-9 flex-1\" />\n\t\t\t<Skeleton className=\"h-9 w-20\" />\n\t\t</div>\n\t);\n}\n\nfunction SchemaFormInputBlockDocumentContent({\n\tvalue,\n\tonValueChange,\n\tblockTypeSlug,\n\tid,\n}: SchemaFormInputBlockDocumentProps) {\n\tconst [createDialogOpen, setCreateDialogOpen] = useState(false);\n\n\tconst { data: blockType } = useSuspenseQuery(\n\t\tbuildGetBlockTypeQuery(blockTypeSlug),\n\t);\n\n\tconst { data: blockDocumentCount } = useSuspenseQuery(\n\t\tbuildCountFilterBlockDocumentsQuery({\n\t\t\tblock_types: {\n\t\t\t\tslug: { any_: [blockTypeSlug] },\n\t\t\t},\n\t\t\tblock_documents: {\n\t\t\t\toperator: \"and_\",\n\t\t\t\tis_anonymous: { eq_: false },\n\t\t\t},\n\t\t\tinclude_secrets: false,\n\t\t\tsort: \"BLOCK_TYPE_AND_NAME_ASC\",\n\t\t\toffset: 0,\n\t\t}),\n\t);\n\n\tconst hasBlockDocuments = blockDocumentCount > 0;\n\tconst selectedBlockDocumentId = value?.$ref;\n\n\tconst handleSelect = (blockDocumentId: string | undefined) => {\n\t\tif (blockDocumentId) {\n\t\t\tonValueChange({ $ref: blockDocumentId });\n\t\t} else {\n\t\t\tonValueChange(undefined);\n\t\t}\n\t};\n\n\tconst handleCreated = (blockDocumentId: string) => {\n\t\tonValueChange({ $ref: blockDocumentId });\n\t};\n\n\treturn (\n\t\t<div id={id} className=\"flex items-center gap-2\">\n\t\t\t<BlockTypeLogo logoUrl={blockType.logo_url} alt={blockType.name} />\n\t\t\t{hasBlockDocuments && (\n\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t<BlockDocumentCombobox\n\t\t\t\t\t\tblockTypeSlug={blockTypeSlug}\n\t\t\t\t\t\tselectedBlockDocumentId={selectedBlockDocumentId}\n\t\t\t\t\t\tonSelect={handleSelect}\n\t\t\t\t\t\tonCreateNew={() => setCreateDialogOpen(true)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<Button\n\t\t\t\ttype=\"button\"\n\t\t\t\tvariant=\"outline\"\n\t\t\t\tonClick={() => setCreateDialogOpen(true)}\n\t\t\t>\n\t\t\t\tAdd\n\t\t\t\t<Icon id=\"Plus\" className=\"ml-2 size-4\" />\n\t\t\t</Button>\n\t\t\t<BlockDocumentCreateDialog\n\t\t\t\topen={createDialogOpen}\n\t\t\t\tonOpenChange={setCreateDialogOpen}\n\t\t\t\tblockTypeSlug={blockTypeSlug}\n\t\t\t\tonCreated={handleCreated}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","import type { CheckedState } from \"@radix-ui/react-checkbox\";\nimport type { BooleanSubtype, SchemaObject } from \"openapi-typescript\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { SchemaFormInputEnum } from \"./schema-form-input-enum\";\nimport { isWithPrimitiveEnum } from \"./types/schemas\";\nimport { asType } from \"./utilities/asType\";\n\ntype SchemaFormInputBooleanProps = {\n\tvalue: boolean | undefined;\n\tonValueChange: (value: boolean | undefined) => void;\n\tproperty: SchemaObject & BooleanSubtype;\n\tid: string;\n};\n\nexport function SchemaFormInputBoolean({\n\tvalue,\n\tonValueChange,\n\tproperty,\n\tid,\n}: SchemaFormInputBooleanProps) {\n\tfunction onCheckedChange(checked: CheckedState) {\n\t\tonValueChange(asType(checked, Boolean));\n\t}\n\n\tif (isWithPrimitiveEnum(property)) {\n\t\treturn (\n\t\t\t<SchemaFormInputEnum\n\t\t\t\tmultiple={false}\n\t\t\t\tvalue={value}\n\t\t\t\tproperty={property}\n\t\t\t\tonValueChange={onValueChange}\n\t\t\t\tid={id}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn <Switch checked={value} onCheckedChange={onCheckedChange} id={id} />;\n}\n","import type {\n\tIntegerSubtype,\n\tNumberSubtype,\n\tSchemaObject,\n} from \"openapi-typescript\";\nimport { Input } from \"../ui/input\";\nimport { SchemaFormInputEnum } from \"./schema-form-input-enum\";\nimport { isWithPrimitiveEnum } from \"./types/schemas\";\n\ntype SchemaFormInputIntegerProps = {\n\tvalue: number | undefined;\n\tonValueChange: (value: number | undefined) => void;\n\tproperty: SchemaObject & (NumberSubtype | IntegerSubtype);\n\tid: string;\n};\n\nexport function SchemaFormInputInteger({\n\tvalue,\n\tonValueChange,\n\tproperty,\n\tid,\n}: SchemaFormInputIntegerProps) {\n\tif (isWithPrimitiveEnum(property)) {\n\t\treturn (\n\t\t\t<SchemaFormInputEnum\n\t\t\t\tmultiple={false}\n\t\t\t\tvalue={value}\n\t\t\t\tproperty={property}\n\t\t\t\tonValueChange={onValueChange}\n\t\t\t\tid={id}\n\t\t\t/>\n\t\t);\n\t}\n\n\tfunction handleChange(value: string) {\n\t\tif (value === \"\") {\n\t\t\tonValueChange(undefined);\n\t\t} else {\n\t\t\tonValueChange(Number(value));\n\t\t}\n\t}\n\n\treturn (\n\t\t<Input\n\t\t\ttype=\"number\"\n\t\t\tmin={property.minimum}\n\t\t\tmax={property.maximum}\n\t\t\tvalue={value ?? \"\"}\n\t\t\tstep=\"1\"\n\t\t\tonChange={(e) => handleChange(e.target.value)}\n\t\t\tid={id}\n\t\t/>\n\t);\n}\n","export function SchemaFormInputNull() {\n\treturn (\n\t\t<p className=\"text-subdued text-sm\">Property is type &quot;None&quot;</p>\n\t);\n}\n","import type { NumberSubtype, SchemaObject } from \"openapi-typescript\";\nimport { Input } from \"../ui/input\";\nimport { SchemaFormInputEnum } from \"./schema-form-input-enum\";\nimport { isWithPrimitiveEnum } from \"./types/schemas\";\n\ntype SchemaFormInputNumberProps = {\n\tvalue: number | undefined;\n\tonValueChange: (value: number | undefined) => void;\n\tproperty: SchemaObject & NumberSubtype;\n\tid: string;\n};\n\nexport function SchemaFormInputNumber({\n\tvalue,\n\tonValueChange,\n\tproperty,\n\tid,\n}: SchemaFormInputNumberProps) {\n\tif (isWithPrimitiveEnum(property)) {\n\t\treturn (\n\t\t\t<SchemaFormInputEnum\n\t\t\t\tmultiple={false}\n\t\t\t\tvalue={value}\n\t\t\t\tproperty={property}\n\t\t\t\tonValueChange={onValueChange}\n\t\t\t\tid={id}\n\t\t\t/>\n\t\t);\n\t}\n\n\tfunction handleChange(value: string) {\n\t\tif (value === \"\") {\n\t\t\tonValueChange(undefined);\n\t\t} else {\n\t\t\tonValueChange(Number(value));\n\t\t}\n\t}\n\n\treturn (\n\t\t<Input\n\t\t\ttype=\"number\"\n\t\t\tmin={property.minimum}\n\t\t\tmax={property.maximum}\n\t\t\tvalue={value ?? \"\"}\n\t\t\tonChange={(e) => handleChange(e.target.value)}\n\t\t\tid={id}\n\t\t/>\n\t);\n}\n","import type { JsonInputOnChange } from \"../ui/json-input\";\nimport { LazyJsonInput as JsonInput } from \"../ui/json-input-lazy\";\nimport type { PrefectKindValueJinja } from \"./types/prefect-kind-value\";\n\ntype SchemaFormInputPrefectKindJinjaProps = {\n\tvalue: PrefectKindValueJinja;\n\tonValueChange: (value: PrefectKindValueJinja) => void;\n\tid: string;\n};\n\nexport function SchemaFormInputPrefectKindJinja({\n\tvalue,\n\tonValueChange,\n\tid,\n}: SchemaFormInputPrefectKindJinjaProps) {\n\tconst onChange: JsonInputOnChange = (newValue) => {\n\t\tif (typeof newValue === \"string\" || newValue === undefined) {\n\t\t\tonValueChange({\n\t\t\t\t__prefect_kind: \"jinja\",\n\t\t\t\ttemplate: newValue || undefined,\n\t\t\t});\n\t\t}\n\t};\n\n\treturn <JsonInput value={value.template} onChange={onChange} id={id} />;\n}\n","import type { JsonInputOnChange } from \"../ui/json-input\";\nimport { LazyJsonInput as JsonInput } from \"../ui/json-input-lazy\";\nimport type { PrefectKindValueJson } from \"./types/prefect-kind-value\";\n\ntype SchemaFormInputPrefectKindJsonProps = {\n\tvalue: PrefectKindValueJson;\n\tonValueChange: (value: PrefectKindValueJson) => void;\n\tid: string;\n};\n\nexport function SchemaFormInputPrefectKindJson({\n\tvalue,\n\tonValueChange,\n\tid,\n}: SchemaFormInputPrefectKindJsonProps) {\n\tconst onChange: JsonInputOnChange = (value) => {\n\t\tif (typeof value === \"string\" || value === undefined) {\n\t\t\tonValueChange({\n\t\t\t\t__prefect_kind: \"json\",\n\t\t\t\tvalue: value || undefined,\n\t\t\t});\n\t\t}\n\t};\n\n\treturn <JsonInput value={value.value} onChange={onChange} id={id} />;\n}\n","import { useSuspenseQuery } from \"@tanstack/react-query\";\nimport { Suspense, useDeferredValue, useMemo, useState } from \"react\";\nimport { buildFilterVariablesQuery } from \"@/api/variables\";\nimport {\n\tCombobox,\n\tComboboxCommandEmtpy,\n\tComboboxCommandGroup,\n\tComboboxCommandInput,\n\tComboboxCommandItem,\n\tComboboxCommandList,\n\tComboboxContent,\n\tComboboxTrigger,\n} from \"@/components/ui/combobox\";\n\ntype VariableComboboxProps = {\n\tselectedVariableName: string | undefined;\n\tonSelect: (variableName: string | undefined) => void;\n};\n\nexport const VariableCombobox = ({\n\tselectedVariableName,\n\tonSelect,\n}: VariableComboboxProps) => {\n\treturn (\n\t\t<Suspense>\n\t\t\t<VariableComboboxImplementation\n\t\t\t\tselectedVariableName={selectedVariableName}\n\t\t\t\tonSelect={onSelect}\n\t\t\t/>\n\t\t</Suspense>\n\t);\n};\n\nconst VariableComboboxImplementation = ({\n\tselectedVariableName,\n\tonSelect,\n}: VariableComboboxProps) => {\n\tconst [search, setSearch] = useState(\"\");\n\tconst deferredSearch = useDeferredValue(search);\n\n\tconst { data } = useSuspenseQuery(\n\t\tbuildFilterVariablesQuery({\n\t\t\toffset: 0,\n\t\t\tsort: \"NAME_ASC\",\n\t\t\tvariables: deferredSearch\n\t\t\t\t? { operator: \"and_\", name: { like_: deferredSearch } }\n\t\t\t\t: undefined,\n\t\t\tlimit: 50,\n\t\t}),\n\t);\n\n\tconst filteredData = useMemo(() => {\n\t\treturn data.filter((variable) =>\n\t\t\tvariable.name.toLowerCase().includes(deferredSearch.toLowerCase()),\n\t\t);\n\t}, [data, deferredSearch]);\n\n\treturn (\n\t\t<Combobox>\n\t\t\t<ComboboxTrigger\n\t\t\t\tselected={Boolean(selectedVariableName)}\n\t\t\t\taria-label=\"Select a variable\"\n\t\t\t>\n\t\t\t\t{selectedVariableName ?? \"Select a variable...\"}\n\t\t\t</ComboboxTrigger>\n\t\t\t<ComboboxContent>\n\t\t\t\t<ComboboxCommandInput\n\t\t\t\t\tvalue={search}\n\t\t\t\t\tonValueChange={setSearch}\n\t\t\t\t\tplaceholder=\"Search for a variable...\"\n\t\t\t\t/>\n\t\t\t\t<ComboboxCommandEmtpy>No variable found</ComboboxCommandEmtpy>\n\t\t\t\t<ComboboxCommandList>\n\t\t\t\t\t<ComboboxCommandGroup>\n\t\t\t\t\t\t{filteredData.map((variable) => (\n\t\t\t\t\t\t\t<ComboboxCommandItem\n\t\t\t\t\t\t\t\tkey={variable.id}\n\t\t\t\t\t\t\t\tselected={selectedVariableName === variable.name}\n\t\t\t\t\t\t\t\tonSelect={(value) => {\n\t\t\t\t\t\t\t\t\tonSelect(value);\n\t\t\t\t\t\t\t\t\tsetSearch(\"\");\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tvalue={variable.name}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{variable.name}\n\t\t\t\t\t\t\t</ComboboxCommandItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ComboboxCommandGroup>\n\t\t\t\t</ComboboxCommandList>\n\t\t\t</ComboboxContent>\n\t\t</Combobox>\n\t);\n};\n","import { VariableCombobox } from \"@/components/variables/variable-combobox\";\nimport type { PrefectKindValueWorkspaceVariable } from \"./types/prefect-kind-value\";\n\ntype SchemaFormInputPrefectKindWorkspaceVariableProps = {\n\tvalue: PrefectKindValueWorkspaceVariable;\n\tonValueChange: (value: PrefectKindValueWorkspaceVariable) => void;\n\tid: string;\n};\n\nexport function SchemaFormInputPrefectKindWorkspaceVariable({\n\tvalue,\n\tonValueChange,\n\tid,\n}: SchemaFormInputPrefectKindWorkspaceVariableProps) {\n\tconst handleSelect = (variableName: string | undefined) => {\n\t\tonValueChange({\n\t\t\t__prefect_kind: \"workspace_variable\",\n\t\t\tvariable_name: variableName,\n\t\t});\n\t};\n\n\treturn (\n\t\t<div id={id}>\n\t\t\t<VariableCombobox\n\t\t\t\tselectedVariableName={value.variable_name}\n\t\t\t\tonSelect={handleSelect}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","import { format, parse, startOfToday } from \"date-fns\";\nimport { Calendar as CalendarIcon } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Calendar } from \"@/components/ui/calendar\";\nimport {\n\tPopover,\n\tPopoverContent,\n\tPopoverTrigger,\n} from \"@/components/ui/popover\";\nimport { cn } from \"@/utils\";\n\ntype SchemaFormInputStringFormatDateProps = {\n\tvalue: string | undefined;\n\tonValueChange: (value: string | undefined) => void;\n\tid: string;\n};\n\nconst dateFormat = \"yyyy-MM-dd\";\n\nexport function SchemaFormInputStringFormatDate({\n\tvalue,\n\tonValueChange,\n\tid,\n}: SchemaFormInputStringFormatDateProps) {\n\tconst initialDate = value\n\t\t? parse(value, dateFormat, startOfToday())\n\t\t: undefined;\n\tconst [date, setDate] = useState<Date | undefined>(initialDate);\n\n\tfunction handleDateChange(date: Date | undefined) {\n\t\tsetDate(date);\n\t\tonValueChange(date ? format(date, dateFormat) : undefined);\n\t}\n\n\treturn (\n\t\t<Popover>\n\t\t\t<PopoverTrigger asChild>\n\t\t\t\t<Button\n\t\t\t\t\tvariant={\"outline\"}\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\"justify-start text-left font-normal w-full\",\n\t\t\t\t\t\t!date && \"text-muted-foreground\",\n\t\t\t\t\t)}\n\t\t\t\t\tid={id}\n\t\t\t\t>\n\t\t\t\t\t<CalendarIcon className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\t{date ? format(date, \"PPP\") : <span>Pick a date</span>}\n\t\t\t\t</Button>\n\t\t\t</PopoverTrigger>\n\t\t\t<PopoverContent className=\"w-auto p-0\">\n\t\t\t\t<Calendar\n\t\t\t\t\tmode=\"single\"\n\t\t\t\t\tselected={date}\n\t\t\t\t\tonSelect={handleDateChange}\n\t\t\t\t\trequired={true}\n\t\t\t\t\tautoFocus\n\t\t\t\t/>\n\t\t\t</PopoverContent>\n\t\t</Popover>\n\t);\n}\n","import { LazyJsonInput as JsonInput } from \"../ui/json-input-lazy\";\n\nexport type SchemaFormInputStringFormatJsonProps = {\n\tvalue: string | undefined;\n\tonValueChange: (value: string | undefined) => void;\n\tid: string;\n};\n\nexport function SchemaFormInputStringFormatJson({\n\tvalue,\n\tonValueChange,\n\tid,\n}: SchemaFormInputStringFormatJsonProps) {\n\t// the JsonInput's types for onChange are probably wrong but this makes it work\n\tconst onChange: React.FormEventHandler<HTMLDivElement> &\n\t\t((value: string) => void) = (value) => {\n\t\tif (typeof value === \"string\" || value === undefined) {\n\t\t\tonValueChange(value || undefined);\n\t\t}\n\t};\n\n\treturn <JsonInput value={value} onChange={onChange} id={id} />;\n}\n","import { Eye, EyeOff } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\n\ntype SchemaFormInputStringFormatPasswordProps = {\n\tvalue: string | undefined;\n\tonValueChange: (value: string | undefined) => void;\n\tid: string;\n};\n\nexport function SchemaFormInputStringFormatPassword({\n\tvalue,\n\tonValueChange,\n\tid,\n}: SchemaFormInputStringFormatPasswordProps) {\n\tconst [showPassword, setShowPassword] = useState(false);\n\n\tconst handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n\t\tonValueChange(e.target.value || undefined);\n\t};\n\n\treturn (\n\t\t<div className=\"relative\">\n\t\t\t<Input\n\t\t\t\tid={id}\n\t\t\t\ttype={showPassword ? \"text\" : \"password\"}\n\t\t\t\tvalue={value ?? \"\"}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tautoComplete=\"off\"\n\t\t\t\tclassName=\"pr-10\"\n\t\t\t/>\n\t\t\t<Button\n\t\t\t\ttype=\"button\"\n\t\t\t\tvariant=\"ghost\"\n\t\t\t\tsize=\"icon\"\n\t\t\t\tclassName=\"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7\"\n\t\t\t\tonClick={() => setShowPassword(!showPassword)}\n\t\t\t\taria-label={showPassword ? \"Hide password\" : \"Show password\"}\n\t\t\t>\n\t\t\t\t{showPassword ? (\n\t\t\t\t\t<EyeOff className=\"h-4 w-4\" />\n\t\t\t\t) : (\n\t\t\t\t\t<Eye className=\"h-4 w-4\" />\n\t\t\t\t)}\n\t\t\t</Button>\n\t\t</div>\n\t);\n}\n","import { Input } from \"@/components/ui/input\";\n\ntype SchemaFormInputStringFormatTimeDeltaProps = {\n\tvalue: string | undefined;\n\tonValueChange: (value: string | undefined) => void;\n\tid: string;\n};\n\nexport function SchemaFormInputStringFormatTimeDelta({\n\tvalue,\n\tonValueChange,\n\tid,\n}: SchemaFormInputStringFormatTimeDeltaProps) {\n\tfunction handleChange(e: React.ChangeEvent<HTMLInputElement>) {\n\t\tconst inputValue = e.target.value;\n\t\tif (inputValue === \"\") {\n\t\t\tonValueChange(undefined);\n\t\t\treturn;\n\t\t}\n\t\tconst numericValue = Number(inputValue);\n\t\tif (!Number.isNaN(numericValue)) {\n\t\t\tonValueChange(String(numericValue));\n\t\t}\n\t}\n\n\treturn (\n\t\t<Input\n\t\t\ttype=\"number\"\n\t\t\tvalue={value ?? \"\"}\n\t\t\tonChange={handleChange}\n\t\t\tid={id}\n\t\t\tplaceholder=\"Duration in seconds\"\n\t\t\tmin={0}\n\t\t/>\n\t);\n}\n","import type { SchemaObject, StringSubtype } from \"openapi-typescript\";\nimport { Textarea } from \"../ui/textarea\";\nimport { SchemaFormInputEnum } from \"./schema-form-input-enum\";\nimport { SchemaFormInputStringFormatDate } from \"./schema-form-input-string-format-date\";\nimport { SchemaFormInputStringFormatDateTime } from \"./schema-form-input-string-format-datetime\";\nimport { SchemaFormInputStringFormatJson } from \"./schema-form-input-string-format-json\";\nimport { SchemaFormInputStringFormatPassword } from \"./schema-form-input-string-format-password\";\nimport { SchemaFormInputStringFormatTimeDelta } from \"./schema-form-input-string-format-time-delta\";\nimport { isWithPrimitiveEnum } from \"./types/schemas\";\n\nexport type SchemaFormInputStringProps = {\n\tvalue: string | undefined;\n\tonValueChange: (value: string | undefined) => void;\n\tproperty: SchemaObject & StringSubtype;\n\tid: string;\n};\n\nexport function SchemaFormInputString({\n\tvalue,\n\tonValueChange,\n\tproperty,\n\tid,\n}: SchemaFormInputStringProps) {\n\tfunction handleChange(value: string | undefined) {\n\t\tonValueChange(value || undefined);\n\t}\n\n\tif (isWithPrimitiveEnum(property)) {\n\t\treturn (\n\t\t\t<SchemaFormInputEnum\n\t\t\t\tmultiple={false}\n\t\t\t\tvalue={value}\n\t\t\t\tproperty={property}\n\t\t\t\tonValueChange={handleChange}\n\t\t\t\tid={id}\n\t\t\t/>\n\t\t);\n\t}\n\n\tif (property.format === \"date\") {\n\t\treturn (\n\t\t\t<SchemaFormInputStringFormatDate\n\t\t\t\tvalue={value}\n\t\t\t\tonValueChange={handleChange}\n\t\t\t\tid={id}\n\t\t\t/>\n\t\t);\n\t}\n\n\tif (property.format === \"date-time\") {\n\t\treturn (\n\t\t\t<SchemaFormInputStringFormatDateTime\n\t\t\t\tvalue={value}\n\t\t\t\tonValueChange={handleChange}\n\t\t\t\tid={id}\n\t\t\t/>\n\t\t);\n\t}\n\n\tif (property.format === \"json-string\") {\n\t\treturn (\n\t\t\t<SchemaFormInputStringFormatJson\n\t\t\t\tvalue={value}\n\t\t\t\tonValueChange={handleChange}\n\t\t\t\tid={id}\n\t\t\t/>\n\t\t);\n\t}\n\n\tif (property.format === \"time-delta\") {\n\t\treturn (\n\t\t\t<SchemaFormInputStringFormatTimeDelta\n\t\t\t\tvalue={value}\n\t\t\t\tonValueChange={handleChange}\n\t\t\t\tid={id}\n\t\t\t/>\n\t\t);\n\t}\n\n\tif (property.format === \"password\") {\n\t\treturn (\n\t\t\t<SchemaFormInputStringFormatPassword\n\t\t\t\tvalue={value}\n\t\t\t\tonValueChange={handleChange}\n\t\t\t\tid={id}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Textarea\n\t\t\tvalue={value ?? \"\"}\n\t\t\trows={1}\n\t\t\tclassName=\"min-h-min\"\n\t\t\tonChange={(e) => handleChange(e.target.value)}\n\t\t\tid={id}\n\t\t/>\n\t);\n}\n","import type { SchemaObject } from \"openapi-typescript\";\nimport { useEffect } from \"react\";\nimport { SchemaFormInputEnum } from \"./schema-form-input-enum\";\nimport { isWithPrimitiveEnum } from \"./types/schemas\";\nimport { asPrimitive } from \"./utilities/asType\";\n\nexport type SchemaFormInputUnknownProps = {\n\tvalue: unknown;\n\tonValueChange: (value: unknown) => void;\n\tproperty: SchemaObject & { type: undefined };\n\tid: string;\n};\n\nexport function SchemaFormInputUnknown({\n\tvalue,\n\tonValueChange,\n\tproperty,\n\tid,\n}: SchemaFormInputUnknownProps) {\n\t// if this isn't a simple enum we want to autoamtically switch to json\n\tuseEffect(() => {\n\t\tif (!isWithPrimitiveEnum(property)) {\n\t\t\tonValueChange({\n\t\t\t\t__prefect_kind: \"json\",\n\t\t\t});\n\t\t}\n\t}, [property, onValueChange]);\n\n\tif (isWithPrimitiveEnum(property)) {\n\t\treturn (\n\t\t\t<SchemaFormInputEnum\n\t\t\t\tmultiple={false}\n\t\t\t\tvalue={asPrimitive(value)}\n\t\t\t\tproperty={property}\n\t\t\t\tonValueChange={onValueChange}\n\t\t\t\tid={id}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn null;\n}\n","import type { SchemaObject } from \"openapi-typescript\";\nimport { SchemaFormInputAllOf } from \"./schema-form-input-all-of\";\nimport { SchemaFormInputAnyOf } from \"./schema-form-input-any-of\";\nimport { SchemaFormInputArray } from \"./schema-form-input-array\";\nimport { SchemaFormInputBlockDocument } from \"./schema-form-input-block-document\";\nimport { SchemaFormInputBoolean } from \"./schema-form-input-boolean\";\nimport { SchemaFormInputInteger } from \"./schema-form-input-integer\";\nimport { SchemaFormInputNull } from \"./schema-form-input-null\";\nimport { SchemaFormInputNumber } from \"./schema-form-input-number\";\nimport { SchemaFormInputObject } from \"./schema-form-input-object\";\nimport { SchemaFormInputPrefectKindJinja } from \"./schema-form-input-prefect-kind-jinja\";\nimport { SchemaFormInputPrefectKindJson } from \"./schema-form-input-prefect-kind-json\";\nimport { SchemaFormInputPrefectKindWorkspaceVariable } from \"./schema-form-input-prefect-kind-workspace-variable\";\nimport { SchemaFormInputString } from \"./schema-form-input-string\";\nimport { SchemaFormInputUnknown } from \"./schema-form-input-unknown\";\nimport type { SchemaFormErrors } from \"./types/errors\";\nimport { isPrefectKindValue } from \"./types/prefect-kind-value\";\nimport { asArray, asObject, asType } from \"./utilities/asType\";\nimport {\n\tisAllOfObject,\n\tisAnyOfObject,\n\tisOneOfObject,\n} from \"./utilities/guards\";\n\nexport type SchemaFormInputProps = {\n\tvalue: unknown;\n\tonValueChange: (value: unknown) => void;\n\terrors: SchemaFormErrors;\n\tproperty: SchemaObject;\n\tid: string;\n\tnested?: boolean;\n};\n\nexport function SchemaFormInput({\n\tvalue,\n\tonValueChange,\n\terrors,\n\tproperty,\n\tid,\n\tnested = true,\n}: SchemaFormInputProps) {\n\tif (isPrefectKindValue(value)) {\n\t\tif (isPrefectKindValue(value, \"json\")) {\n\t\t\treturn (\n\t\t\t\t<SchemaFormInputPrefectKindJson\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tonValueChange={onValueChange}\n\t\t\t\t\tid={id}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\tif (isPrefectKindValue(value, \"jinja\")) {\n\t\t\treturn (\n\t\t\t\t<SchemaFormInputPrefectKindJinja\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tonValueChange={onValueChange}\n\t\t\t\t\tid={id}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\tif (isPrefectKindValue(value, \"workspace_variable\")) {\n\t\t\treturn (\n\t\t\t\t<SchemaFormInputPrefectKindWorkspaceVariable\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tonValueChange={onValueChange}\n\t\t\t\t\tid={id}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\t// @ts-expect-error This is an exhaustive check. If a prefect kind is not implemented this will get flaggged.\n\t\tthrow new Error(`Prefect kind not implemented: ${value.__prefect_kind}`);\n\t}\n\n\tif (\"block_type_slug\" in property) {\n\t\tconst blockTypeSlug = property.block_type_slug;\n\t\tif (typeof blockTypeSlug === \"string\") {\n\t\t\treturn (\n\t\t\t\t<SchemaFormInputBlockDocument\n\t\t\t\t\tvalue={value as { $ref: string } | undefined}\n\t\t\t\t\tonValueChange={onValueChange}\n\t\t\t\t\tblockTypeSlug={blockTypeSlug}\n\t\t\t\t\tid={id}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t}\n\n\tif (isAnyOfObject(property)) {\n\t\treturn (\n\t\t\t<SchemaFormInputAnyOf\n\t\t\t\tvalue={value}\n\t\t\t\tproperty={property}\n\t\t\t\tonValueChange={onValueChange}\n\t\t\t\terrors={errors}\n\t\t\t/>\n\t\t);\n\t}\n\n\t// According to the spec, anyOf and oneOf are different. But pydantic always uses anyOf even when it should use oneOf. So we treat them the same.\n\t// This block shouldn't ever be hit because we handle anyOf above. But this offers some typesafety and a fallback in case of future changes.\n\t// https://swagger.io/docs/specification/v3_0/data-models/oneof-anyof-allof-not/\n\t// https://github.com/pydantic/pydantic/issues/4125\n\tif (isOneOfObject(property)) {\n\t\tconst propertyWithAnyOf = {\n\t\t\t...property,\n\t\t\tanyOf: property.oneOf,\n\t\t};\n\n\t\treturn (\n\t\t\t<SchemaFormInputAnyOf\n\t\t\t\tvalue={value}\n\t\t\t\tproperty={propertyWithAnyOf}\n\t\t\t\tonValueChange={onValueChange}\n\t\t\t\terrors={errors}\n\t\t\t/>\n\t\t);\n\t}\n\n\t// this is the same as an anyOf so we can convert it here and use the same logic component\n\tif (Array.isArray(property.type)) {\n\t\tconst propertyWithAnyOf = {\n\t\t\t...property,\n\t\t\tanyOf: Object.values(property.type).map((type) => ({\n\t\t\t\ttype,\n\t\t\t})),\n\t\t};\n\n\t\treturn (\n\t\t\t<SchemaFormInputAnyOf\n\t\t\t\tvalue={value}\n\t\t\t\tproperty={propertyWithAnyOf}\n\t\t\t\tonValueChange={onValueChange}\n\t\t\t\terrors={errors}\n\t\t\t/>\n\t\t);\n\t}\n\n\tif (isAllOfObject(property)) {\n\t\treturn (\n\t\t\t<SchemaFormInputAllOf\n\t\t\t\tvalue={value}\n\t\t\t\tonValueChange={onValueChange}\n\t\t\t\terrors={errors}\n\t\t\t\tproperty={property}\n\t\t\t\tid={id}\n\t\t\t/>\n\t\t);\n\t}\n\n\tif (property.type === \"string\") {\n\t\treturn (\n\t\t\t<SchemaFormInputString\n\t\t\t\tvalue={asType(value, String)}\n\t\t\t\tonValueChange={onValueChange}\n\t\t\t\tproperty={property}\n\t\t\t\tid={id}\n\t\t\t/>\n\t\t);\n\t}\n\n\tif (property.type === \"integer\") {\n\t\treturn (\n\t\t\t<SchemaFormInputInteger\n\t\t\t\tvalue={asType(value, Number)}\n\t\t\t\tonValueChange={onValueChange}\n\t\t\t\tproperty={property}\n\t\t\t\tid={id}\n\t\t\t/>\n\t\t);\n\t}\n\n\tif (property.type === \"number\") {\n\t\treturn (\n\t\t\t<SchemaFormInputNumber\n\t\t\t\tvalue={asType(value, Number)}\n\t\t\t\tonValueChange={onValueChange}\n\t\t\t\tproperty={property}\n\t\t\t\tid={id}\n\t\t\t/>\n\t\t);\n\t}\n\n\tif (property.type === \"boolean\") {\n\t\treturn (\n\t\t\t<SchemaFormInputBoolean\n\t\t\t\tvalue={asType(value, Boolean)}\n\t\t\t\tonValueChange={onValueChange}\n\t\t\t\tproperty={property}\n\t\t\t\tid={id}\n\t\t\t/>\n\t\t);\n\t}\n\n\tif (property.type === \"object\") {\n\t\treturn (\n\t\t\t<SchemaFormInputObject\n\t\t\t\tvalues={asObject(value)}\n\t\t\t\tproperty={property}\n\t\t\t\tonValuesChange={onValueChange}\n\t\t\t\terrors={errors}\n\t\t\t\tnested={nested}\n\t\t\t/>\n\t\t);\n\t}\n\n\tif (property.type === \"array\") {\n\t\treturn (\n\t\t\t<SchemaFormInputArray\n\t\t\t\tvalues={asArray(value)}\n\t\t\t\tproperty={property}\n\t\t\t\tonValuesChange={onValueChange}\n\t\t\t\terrors={errors}\n\t\t\t\tid={id}\n\t\t\t/>\n\t\t);\n\t}\n\n\tif (property.type === \"null\") {\n\t\treturn <SchemaFormInputNull />;\n\t}\n\n\tif (property.type === undefined) {\n\t\treturn (\n\t\t\t<SchemaFormInputUnknown\n\t\t\t\tvalue={value}\n\t\t\t\tonValueChange={onValueChange}\n\t\t\t\tproperty={property}\n\t\t\t\tid={id}\n\t\t\t/>\n\t\t);\n\t}\n\n\tthrow new Error(\n\t\t`Schema type not implemented: ${String(property.type satisfies never)}`,\n\t);\n}\n","import type { SchemaObject } from \"openapi-typescript\";\nimport { useMemo } from \"react\";\n\nexport type SchemaFormPropertyDescriptionProps = {\n\tproperty: SchemaObject;\n};\n\nexport function SchemaFormPropertyDescription({\n\tproperty,\n}: SchemaFormPropertyDescriptionProps) {\n\t// Description come from the doc strings which frequently have very short line lengths. We remove the single line breaks to make it easier to read.\n\tconst description = useMemo(() => {\n\t\treturn property.description?.replace(/\\n(?!\\n)/g, \" \");\n\t}, [property.description]);\n\n\t// todo: support markdown\n\treturn description && <p className=\"text-sm text-gray-500\">{description}</p>;\n}\n","import type { SchemaObject } from \"openapi-typescript\";\nimport { useMemo } from \"react\";\nimport { Label } from \"../ui/label\";\nimport { useSchemaFormContext } from \"./use-schema-form-context\";\nimport { getSchemaObjectLabel } from \"./utilities/getSchemaObjectLabel\";\n\nexport type SchemaFormPropertyLabelProps = {\n\tproperty: SchemaObject;\n\trequired: boolean;\n\tid: string;\n};\n\nexport function SchemaFormPropertyLabel({\n\tproperty,\n\trequired,\n\tid,\n}: SchemaFormPropertyLabelProps) {\n\tconst { schema } = useSchemaFormContext();\n\n\tconst label = useMemo(() => {\n\t\tconst label = getSchemaObjectLabel(property, schema);\n\n\t\tif (required) {\n\t\t\treturn label;\n\t\t}\n\n\t\treturn `${label} (Optional)`;\n\t}, [property, required, schema]);\n\n\treturn <Label htmlFor={id}>{label}</Label>;\n}\n","import type { ReferenceObject, SchemaObject } from \"openapi-typescript\";\nimport { useCallback, useEffect, useId, useMemo, useState } from \"react\";\nimport { DropdownMenuItem } from \"../ui/dropdown-menu\";\nimport { SchemaFormInput } from \"./schema-form-input\";\nimport { SchemaFormPropertyDescription } from \"./schema-form-property-description\";\nimport { SchemaFormPropertyErrors } from \"./schema-form-property-errors\";\nimport { SchemaFormPropertyLabel } from \"./schema-form-property-label\";\nimport { SchemaFormPropertyMenu } from \"./schema-form-property-menu\";\nimport {\n\tisSchemaValueIndexError,\n\tisSchemaValuePropertyError,\n\ttype SchemaFormErrors,\n\ttype SchemaValueIndexError,\n\ttype SchemaValuePropertyError,\n} from \"./types/errors\";\nimport { useSchemaFormContext } from \"./use-schema-form-context\";\nimport { isDefined } from \"./utilities/guards\";\nimport { mergeSchemaPropertyDefinition } from \"./utilities/mergeSchemaPropertyDefinition\";\n\nexport type SchemaFormPropertyProps = {\n\tvalue: unknown;\n\tonValueChange: (value: unknown) => void;\n\tproperty: SchemaObject | ReferenceObject;\n\trequired: boolean;\n\terrors: SchemaFormErrors;\n\tshowLabel?: boolean;\n\tnested?: boolean;\n};\n\nexport function SchemaFormProperty({\n\tproperty: propertyDefinition,\n\tvalue,\n\tonValueChange,\n\trequired,\n\terrors,\n\tshowLabel = true,\n\tnested = true,\n}: SchemaFormPropertyProps) {\n\tconst { schema, skipDefaultValueInitialization } = useSchemaFormContext();\n\n\tconst property = useMemo(() => {\n\t\treturn mergeSchemaPropertyDefinition(propertyDefinition, schema);\n\t}, [propertyDefinition, schema]);\n\n\tconst unknownPropertyType = useMemo(() => {\n\t\treturn !isDefined(property.type);\n\t}, [property.type]);\n\n\tconst nestedErrors = useMemo(() => {\n\t\treturn errors.filter(\n\t\t\t(error): error is SchemaValuePropertyError | SchemaValueIndexError =>\n\t\t\t\tisSchemaValuePropertyError(error) || isSchemaValueIndexError(error),\n\t\t);\n\t}, [errors]);\n\n\tconst [initialized, setInitialized] = useState(false);\n\tconst [internalValue, setInternalValue] = useState(getInitialValue);\n\tconst [omitted, setOmitted] = useState(false);\n\tconst id = useId();\n\n\tconst handleValueChange = useCallback(\n\t\t(value: unknown) => {\n\t\t\tsetInternalValue(value);\n\t\t\tonValueChange(value);\n\t\t},\n\t\t[onValueChange],\n\t);\n\n\tconst handleOmittedChange = useCallback(() => {\n\t\tconst isOmitted = !omitted;\n\n\t\tsetOmitted(isOmitted);\n\t\tonValueChange(isOmitted ? undefined : internalValue);\n\t}, [omitted, onValueChange, internalValue]);\n\n\tuseEffect(() => {\n\t\tif (initialized || skipDefaultValueInitialization) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (isDefined(property.default) && !isDefined(value)) {\n\t\t\tonValueChange(property.default);\n\t\t}\n\n\t\tsetInitialized(true);\n\t}, [\n\t\tinitialized,\n\t\tskipDefaultValueInitialization,\n\t\tonValueChange,\n\t\tproperty.default,\n\t\tvalue,\n\t]);\n\n\tfunction getInitialValue() {\n\t\tif (isDefined(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\tif (isDefined(property.default) && !skipDefaultValueInitialization) {\n\t\t\treturn property.default;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\treturn (\n\t\t<div className=\"flex flex-col gap-2 group\">\n\t\t\t{showLabel && (\n\t\t\t\t<div className=\"grid grid-cols-[1fr_auto] items-center gap-2\">\n\t\t\t\t\t<div className=\"flex flex-col gap-1\">\n\t\t\t\t\t\t<SchemaFormPropertyLabel\n\t\t\t\t\t\t\tproperty={property}\n\t\t\t\t\t\t\trequired={required}\n\t\t\t\t\t\t\tid={id}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<SchemaFormPropertyDescription property={property} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"ml-auto\">\n\t\t\t\t\t\t<SchemaFormPropertyMenu\n\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\tonValueChange={handleValueChange}\n\t\t\t\t\t\t\tproperty={property}\n\t\t\t\t\t\t\tdisableKinds={unknownPropertyType}\n\t\t\t\t\t\t\tdefaultValue={property.default}\n\t\t\t\t\t\t\thasDefaultValue={isDefined(property.default)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<DropdownMenuItem onClick={handleOmittedChange}>\n\t\t\t\t\t\t\t\t{omitted ? \"Include value\" : \"Omit value\"}\n\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t</SchemaFormPropertyMenu>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{!showLabel && <SchemaFormPropertyDescription property={property} />}\n\n\t\t\t<fieldset disabled={omitted}>\n\t\t\t\t<SchemaFormInput\n\t\t\t\t\tproperty={property}\n\t\t\t\t\tvalue={internalValue}\n\t\t\t\t\tonValueChange={handleValueChange}\n\t\t\t\t\terrors={nestedErrors}\n\t\t\t\t\tid={id}\n\t\t\t\t\tnested={nested}\n\t\t\t\t/>\n\t\t\t</fieldset>\n\n\t\t\t<SchemaFormPropertyErrors errors={errors} />\n\t\t</div>\n\t);\n}\n","import type { WithPosition } from \"../types/schemas\";\n\nexport function sortByPropertyPosition(a: WithPosition, b: WithPosition) {\n\treturn (a.position ?? 0) - (b.position ?? 0);\n}\n","import type { ObjectSubtype, SchemaObject } from \"openapi-typescript\";\nimport { useCallback, useMemo, useRef } from \"react\";\nimport useDebounceCallback from \"@/hooks/use-debounce-callback\";\nimport { Card } from \"../ui/card\";\nimport { SchemaFormProperty } from \"./schema-form-property\";\nimport {\n\tisSchemaValuePropertyError,\n\ttype SchemaFormErrors,\n} from \"./types/errors\";\nimport type { PrefectObjectSubtype } from \"./types/schemas\";\nimport { sortByPropertyPosition } from \"./utilities/sortByPropertyPosition\";\n\nexport type SchemaFormInputObjectProps = {\n\tvalues: Record<string, unknown> | undefined;\n\tonValuesChange: (values: Record<string, unknown> | undefined) => void;\n\tproperty: SchemaObject & ObjectSubtype & PrefectObjectSubtype;\n\terrors: SchemaFormErrors;\n\tnested: boolean;\n};\n\nexport function SchemaFormInputObject({\n\tvalues,\n\tonValuesChange,\n\tproperty,\n\terrors,\n\tnested,\n}: SchemaFormInputObjectProps) {\n\tconst patches = useRef<{ key: string; value: unknown }[]>([]);\n\n\tconst flush = useDebounceCallback(\n\t\tuseCallback(() => {\n\t\t\tconst newValues = { ...values };\n\n\t\t\tfor (const { key, value } of patches.current) {\n\t\t\t\tnewValues[key] = value;\n\n\t\t\t\tif (value === undefined) {\n\t\t\t\t\tdelete newValues[key];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tpatches.current = [];\n\n\t\t\tif (Object.keys(newValues).length === 0) {\n\t\t\t\tonValuesChange(undefined);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tonValuesChange(newValues);\n\t\t}, [values, onValuesChange]),\n\t\t10,\n\t);\n\n\tfunction onPropertyValueChange(key: string, value: unknown) {\n\t\tpatches.current.push({ key, value });\n\n\t\tflush();\n\t}\n\n\tfunction getPropertyValue(key: string): unknown {\n\t\treturn values?.[key];\n\t}\n\n\tfunction getPropertyErrors(key: string): SchemaFormErrors {\n\t\treturn errors\n\t\t\t.filter(isSchemaValuePropertyError)\n\t\t\t.filter((error) => error.property === key)\n\t\t\t.flatMap((error) => error.errors);\n\t}\n\n\tconst properties = useMemo(() => {\n\t\treturn Object.entries(property.properties ?? {}).sort(([, a], [, b]) =>\n\t\t\tsortByPropertyPosition(a, b),\n\t\t);\n\t}, [property.properties]);\n\n\tconst output = (\n\t\t<div className=\"flex flex-col gap-4\">\n\t\t\t{properties.map(([key, subProperty]) => (\n\t\t\t\t<SchemaFormProperty\n\t\t\t\t\tkey={key}\n\t\t\t\t\tvalue={getPropertyValue(key)}\n\t\t\t\t\tonValueChange={(value) => onPropertyValueChange(key, value)}\n\t\t\t\t\tproperty={subProperty}\n\t\t\t\t\terrors={getPropertyErrors(key)}\n\t\t\t\t\trequired={Boolean(property.required?.includes(key))}\n\t\t\t\t/>\n\t\t\t))}\n\t\t</div>\n\t);\n\n\tif (nested) {\n\t\treturn <Card className=\"p-2\">{output}</Card>;\n\t}\n\n\treturn output;\n}\n","import type { ReactNode } from \"react\";\nimport { SchemaFormContext } from \"./use-schema-form-context\";\n\ntype SchemaFormProviderProps = SchemaFormContext & {\n\tchildren: ReactNode;\n};\n\nexport const SchemaFormProvider = ({\n\tchildren,\n\t...context\n}: SchemaFormProviderProps) => {\n\treturn (\n\t\t<SchemaFormContext.Provider value={context}>\n\t\t\t{children}\n\t\t</SchemaFormContext.Provider>\n\t);\n};\n","import { useCallback } from \"react\";\nimport {\n\tSchemaFormInputObject,\n\ttype SchemaFormInputObjectProps,\n} from \"./schema-form-input-object\";\nimport { SchemaFormProvider } from \"./schema-form-provider\";\nimport type { SchemaFormErrors } from \"./types/errors\";\nimport type { SchemaFormValues } from \"./types/values\";\nimport type { SchemaFormContext } from \"./use-schema-form-context\";\n\nexport type SchemaFormProps = SchemaFormContext & {\n\terrors: SchemaFormErrors;\n\tvalues: SchemaFormValues;\n\tonValuesChange: (values: SchemaFormValues) => void;\n};\n\nexport const SchemaForm = ({\n\tschema,\n\tkinds,\n\tskipDefaultValueInitialization,\n\tvalues,\n\tonValuesChange,\n\terrors,\n}: SchemaFormProps) => {\n\tconst context: SchemaFormContext = {\n\t\tschema,\n\t\tkinds,\n\t\tskipDefaultValueInitialization,\n\t};\n\n\tconst handleValuesChange = useCallback(\n\t\t(values: Record<string, unknown> | undefined) => {\n\t\t\tif (values === undefined) {\n\t\t\t\tonValuesChange({});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tonValuesChange(values);\n\t\t},\n\t\t[onValuesChange],\n\t);\n\n\tconst properties: Omit<SchemaFormInputObjectProps, \"nested\"> = {\n\t\tvalues,\n\t\tproperty: schema,\n\t\tonValuesChange: handleValuesChange,\n\t\terrors,\n\t};\n\n\treturn (\n\t\t<div className=\"flex flex-col gap-4\">\n\t\t\t<SchemaFormProvider {...context}>\n\t\t\t\t<SchemaFormInputObject {...properties} nested={false} />\n\t\t\t</SchemaFormProvider>\n\t\t</div>\n\t);\n};\n"],"names":["__iconNode","EyeOff","createLucideIcon","Eye","GripVertical","isDefined","value","isRecord","item","isDate","isArray","isEmptyObject","isReferenceObject","property","isAnyOfObject","isOneOfObject","isAllOfObject","isItemsObject","isSchemaWithDefinitions","schema","getSchemaDefinition","definition","definitionKey","definitionSchema","mergeSchemaPropertyDefinition","$ref","rest","merge","SchemaFormInputAllOf","onValueChange","errors","id","useSchemaFormContext","merged","useMemo","allOf","baseProperty","definitions","reference","jsx","SchemaFormInput","getIndexForAnyOfPropertyValue","valueOrDefaultValue","getSchemaPropertyAnyOfDefinitions","getObjectDefinitionIndex","getRecordDefinitionIndex","valueKeys","index","keysInCommon","resultIndex","resultKeysInCommon","definitionIndex","definitionKeys","definitionKeysInCommon","schemaObjectTypeLabels","getSchemaObjectTypeLabel","getSchemaObjectLabel","fallback","SchemaFormInputAnyOf","selectedIndex","setSelectedIndex","useState","values","useRef","onSelectedIndexChange","newSelectedIndexValue","newSelectedIndex","jsxs","ToggleGroup","option","label","ToggleGroupItem","Card","SchemaFormProperty","byteToHex","i","unsafeStringify","arr","offset","getRandomValues","rnds8","rng","randomUUID","native","_v4","options","buf","rnds","v4","isSchemaValueError","error","isSchemaValuePropertyError","isSchemaValueIndexError","SchemaFormPropertyErrors","propertyErrors","getPrefectKindFromValue","isPrefectKindValue","kind","isPrefectKind","convertValueToPrefectKind","to","from","convertPrefectKindValueJson","convertPrefectKindValueJinja","convertPrefectKindValueWorkspaceVariable","convertPrefectKindValueNull","json","parsed","coerceValueToProperties","InvalidSchemaValueTransformation","jinja","workspaceVariable","coerceValueToProperty","response","coerceValueToArrayProperty","coerceValueToObjectProperty","key","propertyValue","SchemaFormPropertyMenu","children","disableKinds","defaultValue","hasDefaultValue","kinds","open","setOpen","isDefaultValueDisabled","handleUseDefaultValue","convertValueKind","newValue","kindOptions","current","prefectKinds","DropdownMenu","DropdownMenuTrigger","Button","Icon","DropdownMenuContent","DropdownMenuItem","getPrefectKindLabel","DropdownMenuSeparator","SchemaFormInputArrayItem","itemKey","items","onDelete","first","last","canMove","moveUp","moveDown","moveToTop","moveToBottom","useId","attributes","listeners","setNodeRef","transform","transition","isDragging","useSortable","style","CSS","Fragment","SchemaFormInputArrayList","onValuesChange","isEmpty","canAddMore","prefixItemsCount","sensors","useSensors","useSensor","PointerSensor","KeyboardSensor","sortableKeyboardCoordinates","localKeyedValues","setLocalKeyedValues","uuidv4","getPropertyForIndex","getErrorsForIndex","getFirstForIndex","getLastForIndex","getCanMoveForIndex","handleValueChange","addItem","newKeyedValues","moveItem","newValues","deleteItem","handleDragEnd","event","active","over","oldIndex","newIndex","sortableKeys","DndContext","closestCenter","SortableContext","verticalListSortingStrategy","SchemaFormInputEnum","props","search","setSearch","selected","isSelected","onSelect","onSelectMultiple","onSelectSingle","v","Combobox","ComboboxTrigger","ComboboxContent","ComboboxCommandInput","ComboboxCommandEmtpy","ComboboxCommandList","ComboboxCommandItem","isWithPrimitiveEnum","isPrimitivePropertyType","asType","type","asObject","asPrimitive","asArray","SchemaFormInputArray","handleValuesChange","BlockDocumentCombobox","blockTypeSlug","selectedBlockDocumentId","onCreateNew","Suspense","BlockDocumentComboboxImplementation","deferredSearch","useDeferredValue","data","useSuspenseQuery","buildListFilterBlockDocumentsQuery","filteredData","blockDocument","selectedBlockDocument","ComboboxCommandGroup","SchemaFormInputBlockDocument","SchemaFormInputBlockDocumentSkeleton","SchemaFormInputBlockDocumentContent","Skeleton","createDialogOpen","setCreateDialogOpen","blockType","buildGetBlockTypeQuery","blockDocumentCount","buildCountFilterBlockDocumentsQuery","hasBlockDocuments","handleSelect","blockDocumentId","handleCreated","BlockTypeLogo","BlockDocumentCreateDialog","SchemaFormInputBoolean","onCheckedChange","checked","Switch","SchemaFormInputInteger","handleChange","Input","e","SchemaFormInputNull","SchemaFormInputNumber","SchemaFormInputPrefectKindJinja","onChange","JsonInput","SchemaFormInputPrefectKindJson","VariableCombobox","selectedVariableName","VariableComboboxImplementation","buildFilterVariablesQuery","variable","SchemaFormInputPrefectKindWorkspaceVariable","variableName","dateFormat","SchemaFormInputStringFormatDate","initialDate","parse","startOfToday","date","setDate","handleDateChange","format","Popover","PopoverTrigger","cn","CalendarIcon","PopoverContent","Calendar","SchemaFormInputStringFormatJson","SchemaFormInputStringFormatPassword","showPassword","setShowPassword","SchemaFormInputStringFormatTimeDelta","inputValue","numericValue","SchemaFormInputString","SchemaFormInputStringFormatDateTime","Textarea","SchemaFormInputUnknown","useEffect","nested","propertyWithAnyOf","SchemaFormInputObject","SchemaFormPropertyDescription","description","SchemaFormPropertyLabel","required","Label","propertyDefinition","showLabel","skipDefaultValueInitialization","unknownPropertyType","nestedErrors","initialized","setInitialized","internalValue","setInternalValue","getInitialValue","omitted","setOmitted","useCallback","handleOmittedChange","isOmitted","sortByPropertyPosition","a","b","patches","flush","useDebounceCallback","onPropertyValueChange","getPropertyValue","getPropertyErrors","properties","output","subProperty","SchemaFormProvider","context","SchemaFormContext","SchemaForm"],"mappings":"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","x_google_ignoreList":[0,1,2,9,10,11,12]}