# ===============
# prefect.yaml
# ===============

# This section tells Prefect how to get your code at runtime
# -------------------------------------------------------------
pull:
- prefect.deployments.steps.git_clone:
    id: clone_step
    repository: https://github.com/eddychetz/etl-with-prefect.git
    branch: main
    # access_token: "{{ prefect.blocks.secret.github-token }}"
- prefect.deployments.steps.set_working_directory:
    directory: "."
- prefect.deployments.steps.run_shell_script:
    script: "mkdir -p data/raw data/clean"

# This section defines your actual deployment
# ----------------------------------------
deployments:
- name: "daily-viljoen-deployment"
  entrypoint: "main.py:master_flow"
  work_pool:
    name: "default-agent-pool"
  schedule:
    cron: "20 8 * * *"
